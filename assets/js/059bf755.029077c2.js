"use strict";(globalThis.webpackChunkphysical_ai_humanoid_textbook=globalThis.webpackChunkphysical_ai_humanoid_textbook||[]).push([[8856],{2644:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"chapter-3-ros2-packages-urdf","title":"Chapter 3: ROS 2 Packages & URDF","description":"Create ROS 2 packages and define robot models using URDF. Visualize robots in RViz and understand coordinate frame transformations with TF2.\\n","source":"@site/docs/003-chapter-3-ros2-packages-urdf.md","sourceDirName":".","slug":"/chapter-3-ros2-packages-urdf","permalink":"/physical-ai-humanoid-textbook/chapter-3-ros2-packages-urdf","draft":false,"unlisted":false,"editUrl":"https://github.com/AlishbaFatima12/physical-ai-humanoid-textbook/edit/main/docs/docs/003-chapter-3-ros2-packages-urdf.md","tags":[{"inline":true,"label":"layer1","permalink":"/physical-ai-humanoid-textbook/tags/layer-1"},{"inline":true,"label":"ros2","permalink":"/physical-ai-humanoid-textbook/tags/ros-2"},{"inline":true,"label":"urdf","permalink":"/physical-ai-humanoid-textbook/tags/urdf"},{"inline":true,"label":"foundation","permalink":"/physical-ai-humanoid-textbook/tags/foundation"}],"version":"current","lastUpdatedBy":"AlishbaFatima12","lastUpdatedAt":1764391712000,"sidebarPosition":3,"frontMatter":{"id":"chapter-3-ros2-packages-urdf","title":"Chapter 3: ROS 2 Packages & URDF","sidebar_position":3,"description":"Create ROS 2 packages and define robot models using URDF. Visualize robots in RViz and understand coordinate frame transformations with TF2.\\n","keywords":["URDF","robot description","packages","RViz","tf2","colcon"],"tags":["layer1","ros2","urdf","foundation"]},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 2: ROS 2 Fundamentals","permalink":"/physical-ai-humanoid-textbook/chapter-2-ros2-fundamentals"},"next":{"title":"Chapter 4: Gazebo Simulation","permalink":"/physical-ai-humanoid-textbook/chapter-4-gazebo-simulation"}}');var s=r(4848),l=r(8453);const o={id:"chapter-3-ros2-packages-urdf",title:"Chapter 3: ROS 2 Packages & URDF",sidebar_position:3,description:"Create ROS 2 packages and define robot models using URDF. Visualize robots in RViz and understand coordinate frame transformations with TF2.\n",keywords:["URDF","robot description","packages","RViz","tf2","colcon"],tags:["layer1","ros2","urdf","foundation"]},t="Chapter 3: ROS 2 Packages & URDF",a={},d=[{value:"Overview",id:"overview",level:2},{value:"ROS 2 Package Structure",id:"ros-2-package-structure",level:2},{value:"Anatomy of a ROS 2 Package (Python)",id:"anatomy-of-a-ros-2-package-python",level:3},{value:"Creating a Package with Dependencies",id:"creating-a-package-with-dependencies",level:3},{value:"Understanding URDF",id:"understanding-urdf",level:2},{value:"URDF Building Blocks",id:"urdf-building-blocks",level:3},{value:"Example 1: Minimal URDF - Single Link",id:"example-1-minimal-urdf---single-link",level:2},{value:"Example 2: Two-Link Robot with Joint",id:"example-2-two-link-robot-with-joint",level:2},{value:"Example 3: Humanoid Torso (Multi-Link)",id:"example-3-humanoid-torso-multi-link",level:2},{value:"Visualizing URDF in RViz",id:"visualizing-urdf-in-rviz",level:2},{value:"Step 1: Install Required Packages",id:"step-1-install-required-packages",level:3},{value:"Step 2: Create a Launch File",id:"step-2-create-a-launch-file",level:3},{value:"Step 3: Build and Run",id:"step-3-build-and-run",level:3},{value:"Understanding TF2 (Transform Frames)",id:"understanding-tf2-transform-frames",level:2},{value:"Viewing TF Tree",id:"viewing-tf-tree",level:3},{value:"Querying Transforms",id:"querying-transforms",level:3},{value:"Using TF2 in Python Code",id:"using-tf2-in-python-code",level:2},{value:"Validating URDF Files",id:"validating-urdf-files",level:2},{value:"Command-Line Validation",id:"command-line-validation",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Create a Simple Robot Package (Easy)",id:"exercise-1-create-a-simple-robot-package-easy",level:3},{value:"Exercise 2: Build a 3-Link Robot Arm (Medium)",id:"exercise-2-build-a-3-link-robot-arm-medium",level:3},{value:"Exercise 3: Humanoid Leg Model (Medium)",id:"exercise-3-humanoid-leg-model-medium",level:3},{value:"Exercise 4: Debug Broken URDF (Hard)",id:"exercise-4-debug-broken-urdf-hard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"URDF Best Practices",id:"urdf-best-practices",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Self-Check: Can You...",id:"self-check-can-you",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"chapter-3-ros-2-packages--urdf",children:"Chapter 3: ROS 2 Packages & URDF"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Learning Objectives:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Create ROS 2 packages with proper structure and dependencies"}),"\n",(0,s.jsx)(n.li,{children:"Define robot models using URDF (Unified Robot Description Format)"}),"\n",(0,s.jsxs)(n.li,{children:["Visualize robots in RViz using ",(0,s.jsx)(n.code,{children:"robot_state_publisher"})]}),"\n",(0,s.jsx)(n.li,{children:"Understand tf2 coordinate frame transformations"}),"\n",(0,s.jsx)(n.li,{children:"Build and install custom packages with colcon"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Prerequisites",type:"info",children:(0,s.jsxs)(n.p,{children:["Complete ",(0,s.jsx)(n.a,{href:"./chapter-2-ros2-fundamentals",children:"Chapter 2"})," - Publisher/subscriber and colcon basics"]})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Estimated Duration"}),": 6 hours (lecture + lab)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Layer Enforcement"}),": This is a ",(0,s.jsx)(n.strong,{children:"Layer 1 (Foundation)"})," chapter. NO AI assistance prompts are provided. You must execute all exercises independently."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ros-2-package-structure",children:"ROS 2 Package Structure"}),"\n",(0,s.jsx)(n.p,{children:"A ROS 2 package is a directory containing code, configuration files, and metadata. Proper package structure enables code reuse and distribution."}),"\n",(0,s.jsx)(n.h3,{id:"anatomy-of-a-ros-2-package-python",children:"Anatomy of a ROS 2 Package (Python)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"my_robot_pkg/\r\n\u251c\u2500\u2500 package.xml          # Package metadata and dependencies\r\n\u251c\u2500\u2500 setup.py             # Python package configuration\r\n\u251c\u2500\u2500 setup.cfg            # Install configuration\r\n\u251c\u2500\u2500 resource/\r\n\u2502   \u2514\u2500\u2500 my_robot_pkg     # Marker file for ament\r\n\u251c\u2500\u2500 my_robot_pkg/\r\n\u2502   \u251c\u2500\u2500 __init__.py\r\n\u2502   \u2514\u2500\u2500 my_node.py       # Python nodes\r\n\u251c\u2500\u2500 launch/              # Launch files (optional)\r\n\u2502   \u2514\u2500\u2500 robot.launch.py\r\n\u251c\u2500\u2500 urdf/                # Robot description files (optional)\r\n\u2502   \u2514\u2500\u2500 robot.urdf\r\n\u2514\u2500\u2500 config/              # Configuration files (optional)\r\n    \u2514\u2500\u2500 params.yaml\n"})}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-package-with-dependencies",children:"Creating a Package with Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws/src\r\nros2 pkg create --build-type ament_python robot_description_pkg \\\r\n  --dependencies rclpy std_msgs sensor_msgs geometry_msgs\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Files:"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"package.xml"})}),": Declares dependencies and metadata"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="package.xml"',children:'<?xml version="1.0"?>\r\n<?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?>\r\n<package format="3">\r\n  <name>robot_description_pkg</name>\r\n  <version>0.0.1</version>\r\n  <description>Robot description package for URDF models</description>\r\n  <maintainer email="you@example.com">Your Name</maintainer>\r\n  <license>Apache License 2.0</license>\r\n\r\n  \x3c!-- Build dependencies --\x3e\r\n  <buildtool_depend>ament_python</buildtool_depend>\r\n\r\n  \x3c!-- Runtime dependencies --\x3e\r\n  <exec_depend>rclpy</exec_depend>\r\n  <exec_depend>std_msgs</exec_depend>\r\n  <exec_depend>sensor_msgs</exec_depend>\r\n  <exec_depend>geometry_msgs</exec_depend>\r\n  <exec_depend>robot_state_publisher</exec_depend>\r\n  <exec_depend>joint_state_publisher</exec_depend>\r\n  <exec_depend>rviz2</exec_depend>\r\n\r\n  <export>\r\n    <build_type>ament_python</build_type>\r\n  </export>\r\n</package>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"setup.py"})}),": Configures Python package installation"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="setup.py"',children:"from setuptools import setup\r\nfrom glob import glob\r\nimport os\r\n\r\npackage_name = 'robot_description_pkg'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.1',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n        # Install URDF files\r\n        (os.path.join('share', package_name, 'urdf'), glob('urdf/*.urdf')),\r\n        # Install launch files\r\n        (os.path.join('share', package_name, 'launch'), glob('launch/*.py')),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    zip_safe=True,\r\n    maintainer='Your Name',\r\n    maintainer_email='you@example.com',\r\n    description='Robot description package',\r\n    license='Apache License 2.0',\r\n    entry_points={\r\n        'console_scripts': [\r\n            # Add executable nodes here\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"understanding-urdf",children:"Understanding URDF"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"URDF (Unified Robot Description Format)"})," is an XML format for describing robot kinematics, dynamics, and visualization."]}),"\n",(0,s.jsx)(n.h3,{id:"urdf-building-blocks",children:"URDF Building Blocks"}),"\n",(0,s.jsx)(n.mermaid,{value:"graph LR\r\n    R[Robot] --\x3e L1[Link 1<br/>Base]\r\n    L1 --\x3e J1[Joint 1<br/>Revolute]\r\n    J1 --\x3e L2[Link 2<br/>Upper Arm]\r\n    L2 --\x3e J2[Joint 2<br/>Revolute]\r\n    J2 --\x3e L3[Link 3<br/>Forearm]\r\n\r\n    style R fill:#FF6B6B\r\n    style L1 fill:#4ECDC4\r\n    style L2 fill:#4ECDC4\r\n    style L3 fill:#4ECDC4\r\n    style J1 fill:#FFE66D\r\n    style J2 fill:#FFE66D"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Key Elements:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<robot>"})}),": Root element containing the entire robot"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<link>"})}),": Rigid body with visual, collision, and inertial properties"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<joint>"})}),": Connection between two links (defines motion type)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-1-minimal-urdf---single-link",children:"Example 1: Minimal URDF - Single Link"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/single_link.urdf"',children:'<?xml version="1.0"?>\r\n<robot name="simple_box">\r\n\r\n  \x3c!-- Base link --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.5 0.3 0.2"/>  \x3c!-- Width, Depth, Height in meters --\x3e\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 0.8 1"/>  \x3c!-- RGBA: Blue --\x3e\r\n      </material>\r\n    </visual>\r\n\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.5 0.3 0.2"/>\r\n      </geometry>\r\n    </collision>\r\n\r\n    <inertial>\r\n      <mass value="1.0"/>  \x3c!-- kg --\x3e\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0"\r\n               iyy="0.01" iyz="0.0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Visualize in RViz:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install urdf_tutorial if not installed\r\nsudo apt install ros-humble-urdf-tutorial\r\n\r\n# Launch visualization\r\nros2 launch urdf_tutorial display.launch.py model:=single_link.urdf\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"RViz will show"}),": A blue box centered at the origin."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-2-two-link-robot-with-joint",children:"Example 2: Two-Link Robot with Joint"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/two_link_robot.urdf"',children:'<?xml version="1.0"?>\r\n<robot name="two_link_arm">\r\n\r\n  \x3c!-- Base link (fixed to ground) --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.1"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0"\r\n               iyy="0.001" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Upper arm link --\x3e\r\n  <link name="upper_arm">\r\n    <visual>\r\n      <origin xyz="0 0 0.25" rpy="0 0 0"/>  \x3c!-- Shift up 25cm --\x3e\r\n      <geometry>\r\n        <box size="0.05 0.05 0.5"/>  \x3c!-- 50cm long arm --\x3e\r\n      </geometry>\r\n      <material name="red">\r\n        <color rgba="0.8 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0.25" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.5"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0"\r\n               iyy="0.01" iyz="0.0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Revolute joint connecting base to upper arm --\x3e\r\n  <joint name="shoulder_joint" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="upper_arm"/>\r\n    <origin xyz="0 0 0.05" rpy="0 0 0"/>  \x3c!-- Joint at top of base --\x3e\r\n    <axis xyz="0 1 0"/>  \x3c!-- Rotate around Y axis --\x3e\r\n    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Joint Types"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"fixed"})}),": No movement (e.g., camera mounted on body)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"revolute"})}),": Rotation with limits (e.g., elbow, shoulder)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"continuous"})}),": Unlimited rotation (e.g., wheel)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"prismatic"})}),": Linear sliding (e.g., elevator, gripper)"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Visualize:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch urdf_tutorial display.launch.py model:=two_link_robot.urdf\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"In RViz"}),': Use the "Joint State Publisher GUI" slider to move the shoulder joint.']}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"example-3-humanoid-torso-multi-link",children:"Example 3: Humanoid Torso (Multi-Link)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/humanoid_torso.urdf"',children:'<?xml version="1.0"?>\r\n<robot name="humanoid_torso">\r\n\r\n  \x3c!-- Base (pelvis) --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.15"/>\r\n      </geometry>\r\n      <material name="white">\r\n        <color rgba="1 1 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <inertia ixx="0.05" ixy="0.0" ixz="0.0"\r\n               iyy="0.05" iyz="0.0" izz="0.05"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Spine (torso) --\x3e\r\n  <link name="spine_link">\r\n    <visual>\r\n      <origin xyz="0 0 0.25" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.25 0.15 0.5"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.7 0.7 0.7 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="8.0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0"\r\n               iyy="0.1" iyz="0.0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Spine joint (fixed for now) --\x3e\r\n  <joint name="spine_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="spine_link"/>\r\n    <origin xyz="0 0 0.075" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Left shoulder --\x3e\r\n  <link name="left_shoulder">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius="0.05"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="0.5"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0"\r\n               iyy="0.001" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_shoulder_joint" type="revolute">\r\n    <parent link="spine_link"/>\r\n    <child link="left_shoulder"/>\r\n    <origin xyz="0 0.15 0.4" rpy="0 0 0"/>  \x3c!-- Top left of torso --\x3e\r\n    <axis xyz="1 0 0"/>  \x3c!-- Roll axis --\x3e\r\n    <limit lower="-1.57" upper="3.14" effort="30.0" velocity="2.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Left upper arm --\x3e\r\n  <link name="left_upper_arm">\r\n    <visual>\r\n      <origin xyz="0 0 -0.15" rpy="0 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.3"/>\r\n      </geometry>\r\n      <material name="red">\r\n        <color rgba="0.8 0 0 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.5"/>\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0"\r\n               iyy="0.01" iyz="0.0" izz="0.01"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_elbow_joint" type="revolute">\r\n    <parent link="left_shoulder"/>\r\n    <child link="left_upper_arm"/>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>  \x3c!-- Pitch axis --\x3e\r\n    <limit lower="0" upper="2.35" effort="20.0" velocity="2.0"/>\r\n  </joint>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Key URDF Attributes"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:'<origin xyz="x y z" rpy="roll pitch yaw"/>'})}),": Position and orientation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:'<limit lower="..." upper="..." effort="..." velocity="..."/>'})}),": Joint constraints"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:'<mass value="..."/>'})}),": Link mass in kg"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<inertia ...>"})}),": Rotational inertia tensor"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"visualizing-urdf-in-rviz",children:"Visualizing URDF in RViz"}),"\n",(0,s.jsx)(n.h3,{id:"step-1-install-required-packages",children:"Step 1: Install Required Packages"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-joint-state-publisher-gui \\\r\n                 ros-humble-robot-state-publisher \\\r\n                 ros-humble-rviz2\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-2-create-a-launch-file",children:"Step 2: Create a Launch File"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="launch/display_robot.launch.py"',children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n\r\n    # Get URDF file path\r\n    urdf_file = os.path.join(\r\n        get_package_share_directory('robot_description_pkg'),\r\n        'urdf',\r\n        'humanoid_torso.urdf'\r\n    )\r\n\r\n    # Read URDF file\r\n    with open(urdf_file, 'r') as file:\r\n        robot_description = file.read()\r\n\r\n    # Nodes\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        output='screen',\r\n        parameters=[{'robot_description': robot_description}]\r\n    )\r\n\r\n    joint_state_publisher_gui = Node(\r\n        package='joint_state_publisher_gui',\r\n        executable='joint_state_publisher_gui',\r\n        output='screen'\r\n    )\r\n\r\n    rviz = Node(\r\n        package='rviz2',\r\n        executable='rviz2',\r\n        output='screen',\r\n        arguments=['-d', os.path.join(\r\n            get_package_share_directory('robot_description_pkg'),\r\n            'rviz',\r\n            'robot.rviz'\r\n        )]\r\n    )\r\n\r\n    return LaunchDescription([\r\n        robot_state_publisher,\r\n        joint_state_publisher_gui,\r\n        rviz\r\n    ])\n"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3-build-and-run",children:"Step 3: Build and Run"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select robot_description_pkg\r\nsource install/setup.bash\r\nros2 launch robot_description_pkg display_robot.launch.py\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Output"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RViz window"}),": Shows 3D robot model"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Joint State Publisher GUI"}),": Sliders to move joints"]}),"\n",(0,s.jsx)(n.li,{children:"Moving sliders updates robot pose in RViz in real-time"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"understanding-tf2-transform-frames",children:"Understanding TF2 (Transform Frames)"}),"\n",(0,s.jsx)(n.p,{children:"TF2 is ROS 2's library for tracking coordinate frames over time. Every link in your URDF becomes a TF frame."}),"\n",(0,s.jsx)(n.h3,{id:"viewing-tf-tree",children:"Viewing TF Tree"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Install tf2 tools\r\nsudo apt install ros-humble-tf2-tools ros-humble-tf2-ros\r\n\r\n# View TF tree (while robot is running)\r\nros2 run tf2_tools view_frames\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output"}),": ",(0,s.jsx)(n.code,{children:"frames.pdf"})," showing transform tree:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"base_link\r\n\u2514\u2500\u2500 spine_link\r\n    \u2514\u2500\u2500 left_shoulder\r\n        \u2514\u2500\u2500 left_upper_arm\n"})}),"\n",(0,s.jsx)(n.h3,{id:"querying-transforms",children:"Querying Transforms"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Get transform from base_link to left_upper_arm\r\nros2 run tf2_ros tf2_echo base_link left_upper_arm\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Output"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"At time 1638298765.123456789\r\n- Translation: [0.000, 0.150, 0.400]\r\n- Rotation: in Quaternion [0.000, 0.000, 0.000, 1.000]\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"using-tf2-in-python-code",children:"Using TF2 in Python Code"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",metastring:'title="robot_description_pkg/tf_listener_example.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom tf2_ros import TransformException\r\nfrom tf2_ros.buffer import Buffer\r\nfrom tf2_ros.transform_listener import TransformListener\r\n\r\n\r\nclass TfListenerNode(Node):\r\n    def __init__(self):\r\n        super().__init__('tf_listener_node')\r\n\r\n        # TF2 buffer and listener\r\n        self.tf_buffer = Buffer()\r\n        self.tf_listener = TransformListener(self.tf_buffer, self)\r\n\r\n        # Timer to query transforms\r\n        self.timer = self.create_timer(1.0, self.timer_callback)\r\n\r\n    def timer_callback(self):\r\n        from_frame = 'base_link'\r\n        to_frame = 'left_upper_arm'\r\n\r\n        try:\r\n            # Lookup transform\r\n            transform = self.tf_buffer.lookup_transform(\r\n                to_frame,\r\n                from_frame,\r\n                rclpy.time.Time()\r\n            )\r\n\r\n            t = transform.transform.translation\r\n            self.get_logger().info(\r\n                f'Transform from {from_frame} to {to_frame}: '\r\n                f'x={t.x:.3f}, y={t.y:.3f}, z={t.z:.3f}'\r\n            )\r\n\r\n        except TransformException as ex:\r\n            self.get_logger().warn(f'Could not transform: {ex}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = TfListenerNode()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Run:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run robot_description_pkg tf_listener_example\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"validating-urdf-files",children:"Validating URDF Files"}),"\n",(0,s.jsx)(n.h3,{id:"command-line-validation",children:"Command-Line Validation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Check URDF syntax\r\ncheck_urdf humanoid_torso.urdf\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Output (valid URDF)"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"robot name is: humanoid_torso\r\n---------- Successfully Parsed XML ---------------\r\nroot Link: base_link has 1 child(ren)\r\n    child(1):  spine_link\r\n        child(1):  left_shoulder\r\n            child(1):  left_upper_arm\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Common Errors"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Error:   Failed to parse robot model\r\nError:   parent link "base_lik" not found\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Typo in parent link name (",(0,s.jsx)(n.code,{children:"base_lik"})," instead of ",(0,s.jsx)(n.code,{children:"base_link"}),")"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-1-create-a-simple-robot-package-easy",children:"Exercise 1: Create a Simple Robot Package (Easy)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Objective"}),": Build a ROS 2 package with a single-link URDF."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Create package ",(0,s.jsx)(n.code,{children:"my_simple_robot"})," with dependencies: ",(0,s.jsx)(n.code,{children:"rclpy"}),", ",(0,s.jsx)(n.code,{children:"robot_state_publisher"}),", ",(0,s.jsx)(n.code,{children:"rviz2"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add URDF file: ",(0,s.jsx)(n.code,{children:"urdf/box_robot.urdf"})," (single box link, size 1x1x0.5m, green color)"]}),"\n",(0,s.jsxs)(n.li,{children:["Build with ",(0,s.jsx)(n.code,{children:"colcon build"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"colcon build"})," completes without errors"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"check_urdf box_robot.urdf"})," validates successfully"]}),"\n",(0,s.jsxs)(n.li,{children:["Package appears in ",(0,s.jsx)(n.code,{children:"ros2 pkg list"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Output"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"$ check_urdf box_robot.urdf\r\nrobot name is: box_robot\r\n---------- Successfully Parsed XML ---------------\r\nroot Link: base_link has 0 child(ren)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"exercise-2-build-a-3-link-robot-arm-medium",children:"Exercise 2: Build a 3-Link Robot Arm (Medium)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Objective"}),": Create a robot arm with 3 links and 2 revolute joints."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"base_link"}),": Cylinder (radius=0.05m, height=0.1m), gray"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"link1"}),": Box (0.05x0.05x0.3m), blue, connected via ",(0,s.jsx)(n.code,{children:"joint1"})," (revolute, Y-axis, limits: -\u03c0/2 to \u03c0/2)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"link2"}),": Box (0.05x0.05x0.25m), red, connected via ",(0,s.jsx)(n.code,{children:"joint2"})," (revolute, Y-axis, limits: 0 to 2.35 rad)"]}),"\n",(0,s.jsx)(n.li,{children:"Create launch file to visualize in RViz"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["URDF validates with ",(0,s.jsx)(n.code,{children:"check_urdf"})]}),"\n",(0,s.jsx)(n.li,{children:"Launch file starts RViz + Joint State Publisher GUI"}),"\n",(0,s.jsx)(n.li,{children:"Moving sliders in GUI updates robot in RViz"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected TF Tree"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"base_link \u2192 link1 \u2192 link2\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"exercise-3-humanoid-leg-model-medium",children:"Exercise 3: Humanoid Leg Model (Medium)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Objective"}),": Model a humanoid leg with hip, knee, and ankle joints."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"pelvis"})," (base_link): Box (0.2x0.2x0.1m)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"thigh"}),": Cylinder (radius=0.04m, length=0.4m), connected via ",(0,s.jsx)(n.code,{children:"hip_joint"})," (revolute)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"shin"}),": Cylinder (radius=0.035m, length=0.35m), connected via ",(0,s.jsx)(n.code,{children:"knee_joint"})," (revolute, limit: 0 to 2.35 rad)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"foot"}),": Box (0.1x0.05x0.25m), connected via ",(0,s.jsx)(n.code,{children:"ankle_joint"})," (revolute)"]}),"\n",(0,s.jsx)(n.li,{children:"All joints should have realistic human joint limits"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Leg model visualizes in RViz"}),"\n",(0,s.jsx)(n.li,{children:"Joint limits prevent unnatural poses (e.g., knee bending backwards)"}),"\n",(0,s.jsx)(n.li,{children:"Total leg length (pelvis to foot) \u2248 0.9m"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected Joints"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"hip_joint"}),": -1.57 to 1.57 rad (\xb190\xb0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"knee_joint"}),": 0 to 2.35 rad (0\xb0 to 135\xb0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ankle_joint"}),": -0.52 to 0.52 rad (\xb130\xb0)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"exercise-4-debug-broken-urdf-hard",children:"Exercise 4: Debug Broken URDF (Hard)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Objective"}),": Fix syntax errors in a provided broken URDF file."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Broken URDF (intentional errors)"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",metastring:'title="broken_robot.urdf"',children:'<?xml version="1.0"?>\r\n<robot name="broken_bot">\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.5 0.3 0.2"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n\r\n  <link name="arm_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n\r\n  \x3c!-- ERROR 1: Parent link name typo --\x3e\r\n  <joint name="arm_joint" type="revolute">\r\n    <parent link="base_lik"/>\r\n    <child link="arm_link"/>\r\n    <origin xyz="0 0 0.1" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    \x3c!-- ERROR 2: Missing <limit> tag for revolute joint --\x3e\r\n  </joint>\r\n\r\n  \x3c!-- ERROR 3: Child link doesn\'t exist --\x3e\r\n  <joint name="gripper_joint" type="fixed">\r\n    <parent link="arm_link"/>\r\n    <child link="gripper_link"/>\r\n    <origin xyz="0 0 0.4" rpy="0 0 0"/>\r\n  </joint>\r\n</robot>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"check_urdf broken_robot.urdf"})," to identify errors"]}),"\n",(0,s.jsx)(n.li,{children:"Fix all 3 errors"}),"\n",(0,s.jsxs)(n.li,{children:["Validate corrected URDF passes ",(0,s.jsx)(n.code,{children:"check_urdf"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Corrected URDF has no validation errors"}),"\n",(0,s.jsx)(n.li,{children:"Robot displays correctly in RViz"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Hint"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Error 1: ",(0,s.jsx)(n.code,{children:"base_lik"})," \u2192 ",(0,s.jsx)(n.code,{children:"base_link"})]}),"\n",(0,s.jsxs)(n.li,{children:["Error 2: Add ",(0,s.jsx)(n.code,{children:'<limit lower="-1.57" upper="1.57" effort="10" velocity="1.0"/>'})]}),"\n",(0,s.jsxs)(n.li,{children:["Error 3: Add missing ",(0,s.jsx)(n.code,{children:'<link name="gripper_link">...</link>'})]}),"\n"]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("strong",{children:'Error 1: "check_urdf: command not found"'})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": ",(0,s.jsx)(n.code,{children:"liburdfdom-tools"})," package not installed."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo apt install liburdfdom-tools\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Verification"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"check_urdf --version\n"})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("strong",{children:"Error 2: \"parent link 'xyz' not found\""})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Typo in ",(0,s.jsx)(n.code,{children:'<parent link="..."/>'})," name, or link not defined."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Diagnosis"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"check_urdf robot.urdf\n"})}),(0,s.jsx)(n.p,{children:"Look for:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'Error:   parent link "xyz" not found\n'})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix"}),": Ensure ",(0,s.jsx)(n.code,{children:'<link name="xyz">'})," exists and spelling matches exactly."]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("strong",{children:"Error 3: \"joint 'revolute' must have limits\""})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Revolute/prismatic joint missing ",(0,s.jsx)(n.code,{children:"<limit>"})," tag."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix"}),":\r\nAdd to joint definition:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\n'})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("strong",{children:"Error 4: Robot Not Showing in RViz"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Possible Causes"}),":"]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"robot_state_publisher"})," not running"]}),"\n",(0,s.jsx)(n.li,{children:"Fixed Frame set incorrectly in RViz"}),"\n",(0,s.jsx)(n.li,{children:"No RobotModel display added"}),"\n"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Diagnosis"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 node list\r\n# Should show: /robot_state_publisher\r\n\r\nros2 topic list\r\n# Should show: /robot_description, /joint_states\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix"}),":"]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In RViz, set ",(0,s.jsx)(n.strong,{children:"Fixed Frame"})," to ",(0,s.jsx)(n.code,{children:"base_link"})]}),"\n",(0,s.jsxs)(n.li,{children:["Add display: ",(0,s.jsx)(n.strong,{children:"Add"})," \u2192 ",(0,s.jsx)(n.strong,{children:"RobotModel"})]}),"\n",(0,s.jsxs)(n.li,{children:["Set ",(0,s.jsx)(n.strong,{children:"Description Topic"})," to ",(0,s.jsx)(n.code,{children:"/robot_description"})]}),"\n"]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:(0,s.jsx)("strong",{children:'Error 5: "Failed to parse robot model"'})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": XML syntax error (missing closing tag, invalid attribute)."]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Diagnosis"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"check_urdf robot.urdf\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Common Mistakes"}),":"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Missing ",(0,s.jsx)(n.code,{children:"</link>"})," or ",(0,s.jsx)(n.code,{children:"</joint>"})," closing tags"]}),"\n",(0,s.jsxs)(n.li,{children:["Incorrect attribute names (e.g., ",(0,s.jsx)(n.code,{children:'<box width="0.5"/>'})," instead of ",(0,s.jsx)(n.code,{children:'<box size="0.5 0.5 0.5"/>'}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Invalid joint type (e.g., ",(0,s.jsx)(n.code,{children:'type="rotate"'})," instead of ",(0,s.jsx)(n.code,{children:'type="revolute"'}),")"]}),"\n"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fix"}),": Use an XML validator or IDE with syntax highlighting."]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"urdf-best-practices",children:"URDF Best Practices"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Naming Conventions"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Links: ",(0,s.jsx)(n.code,{children:"snake_case"})," (e.g., ",(0,s.jsx)(n.code,{children:"left_upper_arm"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Joints: ",(0,s.jsx)(n.code,{children:"<child>_joint"})," (e.g., ",(0,s.jsx)(n.code,{children:"left_elbow_joint"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Base link always named ",(0,s.jsx)(n.code,{children:"base_link"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Mass & Inertia"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Never set mass to 0 (causes simulation issues)"}),"\n",(0,s.jsx)(n.li,{children:"Use realistic values (human arm \u2248 1.5 kg, torso \u2248 8 kg)"}),"\n",(0,s.jsxs)(n.li,{children:["For simple boxes: ",(0,s.jsx)(n.code,{children:"ixx = (mass/12) * (height\xb2 + depth\xb2)"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Joint Limits"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Revolute joints MUST have limits"}),"\n",(0,s.jsxs)(n.li,{children:["Use human joint ROM as reference:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Shoulder pitch: -\u03c0/2 to \u03c0"}),"\n",(0,s.jsx)(n.li,{children:"Elbow: 0 to 2.35 rad (135\xb0)"}),"\n",(0,s.jsx)(n.li,{children:"Knee: 0 to 2.35 rad"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Coordinate Frames"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"X-axis: Forward"}),"\n",(0,s.jsx)(n.li,{children:"Y-axis: Left"}),"\n",(0,s.jsx)(n.li,{children:"Z-axis: Up"}),"\n",(0,s.jsx)(n.li,{children:"Follow REP 103 (ROS 2 coordinate frame conventions)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("strong",{children:"Question 1"}),": What's the difference between ",(0,s.jsx)("code",{children:"<visual>"})," and ",(0,s.jsx)("code",{children:"<collision>"})," in URDF?"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer"}),":"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<visual>"})}),": Geometry shown in visualization tools (RViz, Gazebo GUI). Can be complex meshes for aesthetics."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"<collision>"})}),": Geometry used for collision detection in simulation. Should be simple shapes (boxes, cylinders) for performance."]}),"\n"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": A robot hand might have a detailed mesh for ",(0,s.jsx)(n.code,{children:"<visual>"})," but simple boxes for ",(0,s.jsx)(n.code,{children:"<collision>"}),"."]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("strong",{children:"Question 2"}),": Why does a revolute joint require a ",(0,s.jsx)("code",{children:"<limit>"})," tag?"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer"}),": Revolute joints have finite range of motion (unlike continuous joints). The ",(0,s.jsx)(n.code,{children:"<limit>"})," tag specifies:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"lower"}),"/",(0,s.jsx)(n.code,{children:"upper"})]}),": Joint angle bounds (radians)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"effort"})}),": Maximum torque (Nm)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"velocity"})}),": Maximum angular velocity (rad/s)"]}),"\n"]}),(0,s.jsx)(n.p,{children:"Without limits, simulation and motion planning cannot enforce constraints."})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("strong",{children:"Question 3"}),": How do you find the transform from ",(0,s.jsx)("code",{children:"base_link"})," to ",(0,s.jsx)("code",{children:"end_effector"}),"?"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run tf2_ros tf2_echo base_link end_effector\n"})}),(0,s.jsx)(n.p,{children:"Or in Python:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"transform = tf_buffer.lookup_transform('end_effector', 'base_link', rclpy.time.Time())\n"})})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("strong",{children:"Question 4"}),": What happens if you set a link's mass to 0?"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer"}),":"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.strong,{children:"RViz"}),": No effect (visualization only)"]}),"\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.strong,{children:"Gazebo"}),': Link becomes "massless" and behaves unrealistically (infinite acceleration, no gravity response)']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Best Practice"}),": Always set mass > 0, even for lightweight components (min 0.01 kg)"]}),"\n"]})]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsxs)("summary",{children:[(0,s.jsx)("strong",{children:"Question 5"}),": How do you include mesh files (STL/DAE) in URDF?"]}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Answer"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<visual>\r\n  <geometry>\r\n    <mesh filename="package://my_robot/meshes/arm.stl" scale="1 1 1"/>\r\n  </geometry>\r\n</visual>\n'})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Use ",(0,s.jsx)(n.code,{children:"package://"})," URI to reference files in your ROS 2 package. Ensure meshes are installed in ",(0,s.jsx)(n.code,{children:"setup.py"}),":"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"(os.path.join('share', package_name, 'meshes'), glob('meshes/*.stl')),\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"self-check-can-you",children:"Self-Check: Can You..."}),"\n",(0,s.jsx)(n.p,{children:"Before moving to Chapter 4, verify you can:"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Create a ROS 2 package with proper ",(0,s.jsx)(n.code,{children:"package.xml"})," and ",(0,s.jsx)(n.code,{children:"setup.py"})]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Write a valid URDF file with multiple links and joints"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Validate URDF syntax using ",(0,s.jsx)(n.code,{children:"check_urdf"})]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Visualize a robot in RViz using ",(0,s.jsx)(n.code,{children:"robot_state_publisher"})]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use the Joint State Publisher GUI to move joints"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Understand the difference between revolute, continuous, and fixed joints"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Query TF transforms using ",(0,s.jsx)(n.code,{children:"tf2_echo"})]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Debug common URDF errors (missing links, typos, missing limits)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:'If you answered "No" to any item'}),", revisit that section before proceeding."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(n.admonition,{title:"What's Next?",type:"note",children:[(0,s.jsxs)(n.p,{children:["Continue to ",(0,s.jsx)(n.a,{href:"./chapter-4-gazebo-simulation",children:"Chapter 4: Gazebo Simulation"})," to learn about:"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Simulating physics with Gazebo"}),"\n",(0,s.jsx)(n.li,{children:"Adding sensors (cameras, LiDAR, IMU) to URDF"}),"\n",(0,s.jsx)(n.li,{children:"Spawning robots in simulation worlds"}),"\n",(0,s.jsx)(n.li,{children:"Testing robot behaviors before hardware deployment"}),"\n"]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsx)(n.p,{children:"All content verified against official ROS 2 Humble documentation (2025-11-28):"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/URDF/URDF-Main.html",children:"ROS 2 URDF Tutorials"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"http://wiki.ros.org/urdf/XML",children:"URDF XML Specification"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.ros.org/en/humble/Tutorials/Intermediate/Tf2/Tf2-Main.html",children:"ROS 2 TF2 Tutorials"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/ros/robot_state_publisher",children:"robot_state_publisher"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.ros.org/reps/rep-0103.html",children:"REP 103: Standard Units of Measure and Coordinate Conventions"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Chapter Status"}),": \u2705 Complete - All URDF examples validated with check_urdf\r\n",(0,s.jsx)(n.strong,{children:"Last Updated"}),": 2025-11-28\r\n",(0,s.jsx)(n.strong,{children:"Layer"}),": 1 (Foundation) - Independent execution required"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>t});var i=r(6540);const s={},l=i.createContext(s);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);