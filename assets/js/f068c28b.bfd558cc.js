"use strict";(globalThis.webpackChunkphysical_ai_humanoid_textbook=globalThis.webpackChunkphysical_ai_humanoid_textbook||[]).push([[4178],{0:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"chapter-4-gazebo-simulation","title":"Chapter 4: Gazebo Simulation","description":"Simulate robots with Gazebo Harmonic. Add sensors, configure physics, and bridge ROS 2 topics. First AI-assisted chapter with workflow optimization prompts.\\n","source":"@site/docs/004-chapter-4-gazebo-simulation.md","sourceDirName":".","slug":"/chapter-4-gazebo-simulation","permalink":"/physical-ai-humanoid-textbook/docs/chapter-4-gazebo-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/AlishbaFatima12/physical-ai-humanoid-textbook/edit/main/docs/docs/004-chapter-4-gazebo-simulation.md","tags":[{"inline":true,"label":"layer2","permalink":"/physical-ai-humanoid-textbook/docs/tags/layer-2"},{"inline":true,"label":"gazebo","permalink":"/physical-ai-humanoid-textbook/docs/tags/gazebo"},{"inline":true,"label":"simulation","permalink":"/physical-ai-humanoid-textbook/docs/tags/simulation"}],"version":"current","lastUpdatedBy":"AlishbaFatima12","lastUpdatedAt":1764391712000,"sidebarPosition":4,"frontMatter":{"id":"chapter-4-gazebo-simulation","title":"Chapter 4: Gazebo Simulation","sidebar_position":4,"description":"Simulate robots with Gazebo Harmonic. Add sensors, configure physics, and bridge ROS 2 topics. First AI-assisted chapter with workflow optimization prompts.\\n","keywords":["Gazebo","physics simulation","sensors","digital twin","AI-assisted"],"tags":["layer2","gazebo","simulation"]},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 3: ROS 2 Packages & URDF","permalink":"/physical-ai-humanoid-textbook/docs/chapter-3-ros2-packages-urdf"},"next":{"title":"Chapter 5: Unity Visualization","permalink":"/physical-ai-humanoid-textbook/docs/chapter-5-unity-visualization"}}');var r=i(4848),o=i(8453);const t={id:"chapter-4-gazebo-simulation",title:"Chapter 4: Gazebo Simulation",sidebar_position:4,description:"Simulate robots with Gazebo Harmonic. Add sensors, configure physics, and bridge ROS 2 topics. First AI-assisted chapter with workflow optimization prompts.\n",keywords:["Gazebo","physics simulation","sensors","digital twin","AI-assisted"],tags:["layer2","gazebo","simulation"]},a="Chapter 4: Gazebo Simulation",l={},c=[{value:"Overview",id:"overview",level:2},{value:"Introduction to Gazebo Harmonic",id:"introduction-to-gazebo-harmonic",level:2},{value:"Why Simulation?",id:"why-simulation",level:3},{value:"Installing Gazebo Harmonic",id:"installing-gazebo-harmonic",level:2},{value:"Step 1: Install Gazebo Harmonic",id:"step-1-install-gazebo-harmonic",level:3},{value:"Step 2: Install ROS 2 - Gazebo Bridge",id:"step-2-install-ros-2---gazebo-bridge",level:3},{value:"Launching Gazebo",id:"launching-gazebo",level:2},{value:"Basic Launch",id:"basic-launch",level:3},{value:"Launch with a World File",id:"launch-with-a-world-file",level:3},{value:"Converting URDF to SDF",id:"converting-urdf-to-sdf",level:2},{value:"Method 1: Direct URDF Loading (Recommended)",id:"method-1-direct-urdf-loading-recommended",level:3},{value:"Method 2: Convert URDF to SDF",id:"method-2-convert-urdf-to-sdf",level:3},{value:"Example: Spawning Humanoid Robot",id:"example-spawning-humanoid-robot",level:2},{value:"Step 1: Create Enhanced URDF with Gazebo Tags",id:"step-1-create-enhanced-urdf-with-gazebo-tags",level:3},{value:"Step 2: Create Launch File",id:"step-2-create-launch-file",level:3},{value:"Step 3: Run Simulation",id:"step-3-run-simulation",level:3},{value:"Adding Sensors to Robot",id:"adding-sensors-to-robot",level:2},{value:"Camera Sensor",id:"camera-sensor",level:3},{value:"IMU Sensor",id:"imu-sensor",level:3},{value:"Physics Configuration",id:"physics-configuration",level:2},{value:"Gravity and Physics Engine",id:"gravity-and-physics-engine",level:3},{value:"AI-Assisted Workflow Optimization \u2b50",id:"ai-assisted-workflow-optimization-",level:2},{value:"AI Prompt 1: Configure Sensor Parameters",id:"ai-prompt-1-configure-sensor-parameters",level:3},{value:"AI Prompt 2: Debug Physics Instability",id:"ai-prompt-2-debug-physics-instability",level:3},{value:"AI Prompt 3: Optimize Simulation Performance",id:"ai-prompt-3-optimize-simulation-performance",level:3},{value:"ROS 2 - Gazebo Bridge",id:"ros-2---gazebo-bridge",level:2},{value:"Controlling Robot in Simulation",id:"controlling-robot-in-simulation",level:2},{value:"Example: Applying Joint Torques",id:"example-applying-joint-torques",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Launch Humanoid in Gazebo (Easy)",id:"exercise-1-launch-humanoid-in-gazebo-easy",level:3},{value:"Exercise 2: Add Camera and Depth Sensors (Medium)",id:"exercise-2-add-camera-and-depth-sensors-medium",level:3},{value:"Exercise 3: Configure Physics for Stability (Medium)",id:"exercise-3-configure-physics-for-stability-medium",level:3},{value:"Exercise 4: Simulate Moon Gravity (Hard)",id:"exercise-4-simulate-moon-gravity-hard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Documented Workflow Patterns",id:"documented-workflow-patterns",level:2},{value:"Pattern 1: Add New Sensor to Existing Robot",id:"pattern-1-add-new-sensor-to-existing-robot",level:3},{value:"Pattern 2: Optimize Physics Performance",id:"pattern-2-optimize-physics-performance",level:3},{value:"Pattern 3: Debug Unstable Robot",id:"pattern-3-debug-unstable-robot",level:3},{value:"Pattern 4: Bridge ROS 2 \u2194 Gazebo",id:"pattern-4-bridge-ros-2--gazebo",level:3},{value:"Pattern 5: Create Custom World",id:"pattern-5-create-custom-world",level:3},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Self-Check: Can You...",id:"self-check-can-you",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"chapter-4-gazebo-simulation",children:"Chapter 4: Gazebo Simulation"})}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Learning Objectives:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Launch and configure Gazebo Harmonic simulation environments"}),"\n",(0,r.jsx)(n.li,{children:"Import URDF models into Gazebo with proper physics properties"}),"\n",(0,r.jsx)(n.li,{children:"Simulate sensors (cameras, LiDAR, IMU) and process sensor data"}),"\n",(0,r.jsx)(n.li,{children:"Configure physics engines and world parameters"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use AI assistance to accelerate Gazebo workflow setup"})," \u2b50 NEW"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Prerequisites",type:"info",children:(0,r.jsxs)(n.p,{children:["Complete ",(0,r.jsx)(n.a,{href:"./chapter-3-ros2-packages-urdf",children:"Chapter 3"})," - URDF robot descriptions and RViz visualization"]})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Estimated Duration"}),": 6 hours (lecture + lab)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Layer Enforcement"}),": This is a ",(0,r.jsx)(n.strong,{children:"Layer 2 (AI-Assisted)"})," chapter. You will use AI prompts (\u22653) to recognize patterns and optimize workflows, but all final implementations are still your responsibility."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"introduction-to-gazebo-harmonic",children:"Introduction to Gazebo Harmonic"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Gazebo Harmonic"}),' is the latest generation of Gazebo simulator (formerly "Ignition Gazebo"). It provides:']}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Physics-based simulation"}),": Accurate dynamics, collisions, gravity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Sensor simulation"}),": Cameras, depth sensors, LiDAR, IMU"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ROS 2 integration"}),": Seamless topic/service bridging"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Distributed simulation"}),": Run physics and rendering separately"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Plugin system"}),": Extend functionality with custom sensors/actuators"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{title:"Important",type:"danger",children:(0,r.jsxs)(n.p,{children:['Do NOT use "Gazebo Classic" (older version). This course uses ',(0,r.jsx)(n.strong,{children:"Gazebo Harmonic"})," exclusively."]})}),"\n",(0,r.jsx)(n.h3,{id:"why-simulation",children:"Why Simulation?"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Safety"}),": Test dangerous maneuvers without hardware damage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Speed"}),": Iterate 10x faster than real-world testing"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reproducibility"}),": Same conditions every time (no weather, lighting changes)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost"}),": No need for expensive sensors/environments initially"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"installing-gazebo-harmonic",children:"Installing Gazebo Harmonic"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-install-gazebo-harmonic",children:"Step 1: Install Gazebo Harmonic"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Add Gazebo Harmonic repository\r\nsudo wget https://packages.osrfoundation.org/gazebo.gpg -O /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg\r\necho "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] http://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null\r\n\r\nsudo apt update\r\nsudo apt install gz-harmonic\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-install-ros-2---gazebo-bridge",children:"Step 2: Install ROS 2 - Gazebo Bridge"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-ros-gz\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify Installation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim --version\r\n# Expected: Gazebo Sim, version 8.x.x\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"launching-gazebo",children:"Launching Gazebo"}),"\n",(0,r.jsx)(n.h3,{id:"basic-launch",children:"Basic Launch"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"GUI Components"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"3D View"}),": Main simulation window"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Entity Tree"}),": List of models, lights, sensors"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Component Inspector"}),": Properties of selected entity"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Play/Pause"}),": Control simulation time"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"launch-with-a-world-file",children:"Launch with a World File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim shapes.sdf\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Common Example Worlds"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"empty.sdf"}),": Blank world with ground plane"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"shapes.sdf"}),": Demo with geometric shapes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"diff_drive.sdf"}),": Mobile robot example"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"converting-urdf-to-sdf",children:"Converting URDF to SDF"}),"\n",(0,r.jsxs)(n.p,{children:["Gazebo uses ",(0,r.jsx)(n.strong,{children:"SDF (Simulation Description Format)"}),", but can also load URDF files directly."]}),"\n",(0,r.jsx)(n.h3,{id:"method-1-direct-urdf-loading-recommended",children:"Method 1: Direct URDF Loading (Recommended)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim -v 4 -r /path/to/robot.urdf\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Flags"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-v 4"}),": Verbose output (debugging)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-r"}),": Run simulation immediately (not paused)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"method-2-convert-urdf-to-sdf",children:"Method 2: Convert URDF to SDF"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install conversion tool\r\nsudo apt install ros-humble-sdformat-urdf\r\n\r\n# Convert\r\ngz sdf -p robot.urdf > robot.sdf\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"example-spawning-humanoid-robot",children:"Example: Spawning Humanoid Robot"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-create-enhanced-urdf-with-gazebo-tags",children:"Step 1: Create Enhanced URDF with Gazebo Tags"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/humanoid_gazebo.urdf"',children:'<?xml version="1.0"?>\r\n<robot name="humanoid_sim">\r\n\r\n  \x3c!-- Base link (pelvis) --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.15"/>\r\n      </geometry>\r\n      <material name="white">\r\n        <color rgba="1 1 1 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.3 0.2 0.15"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="10.0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0"\r\n               iyy="0.1" iyz="0.0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Gazebo-specific properties --\x3e\r\n  <gazebo reference="base_link">\r\n    <material>Gazebo/White</material>\r\n    <mu1>0.8</mu1>  \x3c!-- Friction coefficient 1 --\x3e\r\n    <mu2>0.8</mu2>  \x3c!-- Friction coefficient 2 --\x3e\r\n    <kp>1000000.0</kp>  \x3c!-- Contact stiffness --\x3e\r\n    <kd>1.0</kd>  \x3c!-- Contact damping --\x3e\r\n  </gazebo>\r\n\r\n  \x3c!-- Torso link --\x3e\r\n  <link name="torso">\r\n    <visual>\r\n      <origin xyz="0 0 0.3" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.25 0.15 0.6"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.7 0.7 0.7 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0.3" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.25 0.15 0.6"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="15.0"/>\r\n      <inertia ixx="0.5" ixy="0.0" ixz="0.0"\r\n               iyy="0.5" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="spine_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="torso"/>\r\n    <origin xyz="0 0 0.075" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  <gazebo reference="torso">\r\n    <material>Gazebo/Grey</material>\r\n  </gazebo>\r\n\r\n</robot>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-create-launch-file",children:"Step 2: Create Launch File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="launch/gazebo_humanoid.launch.py"',children:"import os\r\nfrom ament_index_python.packages import get_package_share_directory\r\nfrom launch import LaunchDescription\r\nfrom launch.actions import IncludeLaunchDescription\r\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\r\nfrom launch_ros.actions import Node\r\n\r\ndef generate_launch_description():\r\n\r\n    # Get package path\r\n    pkg_share = get_package_share_directory('robot_description_pkg')\r\n    urdf_file = os.path.join(pkg_share, 'urdf', 'humanoid_gazebo.urdf')\r\n\r\n    # Read URDF\r\n    with open(urdf_file, 'r') as f:\r\n        robot_description = f.read()\r\n\r\n    # Gazebo launch\r\n    gazebo = IncludeLaunchDescription(\r\n        PythonLaunchDescriptionSource([\r\n            os.path.join(get_package_share_directory('ros_gz_sim'), 'launch', 'gz_sim.launch.py')\r\n        ]),\r\n        launch_arguments={'gz_args': '-r empty.sdf'}.items()\r\n    )\r\n\r\n    # Spawn robot\r\n    spawn_entity = Node(\r\n        package='ros_gz_sim',\r\n        executable='create',\r\n        arguments=[\r\n            '-name', 'humanoid',\r\n            '-topic', '/robot_description',\r\n            '-x', '0', '-y', '0', '-z', '0.5'  # Spawn 0.5m above ground\r\n        ],\r\n        output='screen'\r\n    )\r\n\r\n    # Robot state publisher\r\n    robot_state_publisher = Node(\r\n        package='robot_state_publisher',\r\n        executable='robot_state_publisher',\r\n        parameters=[{'robot_description': robot_description}]\r\n    )\r\n\r\n    # ROS-Gazebo bridge\r\n    bridge = Node(\r\n        package='ros_gz_bridge',\r\n        executable='parameter_bridge',\r\n        arguments=[\r\n            '/clock@rosgraph_msgs/msg/Clock[gz.msgs.Clock'\r\n        ],\r\n        output='screen'\r\n    )\r\n\r\n    return LaunchDescription([\r\n        gazebo,\r\n        robot_state_publisher,\r\n        spawn_entity,\r\n        bridge\r\n    ])\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-run-simulation",children:"Step 3: Run Simulation"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select robot_description_pkg\r\nsource install/setup.bash\r\nros2 launch robot_description_pkg gazebo_humanoid.launch.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected Output"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Gazebo window opens with empty world"}),"\n",(0,r.jsx)(n.li,{children:"Humanoid robot spawns at (0, 0, 0.5)"}),"\n",(0,r.jsx)(n.li,{children:"Robot falls and settles on ground due to gravity"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"adding-sensors-to-robot",children:"Adding Sensors to Robot"}),"\n",(0,r.jsx)(n.h3,{id:"camera-sensor",children:"Camera Sensor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/camera_plugin.urdf" {20-35}',children:'<robot name="robot_with_camera">\r\n\r\n  \x3c!-- ... (previous links) ... --\x3e\r\n\r\n  \x3c!-- Camera link --\x3e\r\n  <link name="camera_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.05"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.05 0.05 0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <inertia ixx="0.0001" ixy="0" ixz="0" iyy="0.0001" iyz="0" izz="0.0001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="camera_joint" type="fixed">\r\n    <parent link="torso"/>\r\n    <child link="camera_link"/>\r\n    <origin xyz="0.15 0 0.5" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Gazebo camera plugin --\x3e\r\n  <gazebo reference="camera_link">\r\n    <sensor type="camera" name="camera1">\r\n      <update_rate>30.0</update_rate>\r\n      <camera name="head">\r\n        <horizontal_fov>1.3962634</horizontal_fov>\r\n        <image>\r\n          <width>800</width>\r\n          <height>600</height>\r\n          <format>R8G8B8</format>\r\n        </image>\r\n        <clip>\r\n          <near>0.02</near>\r\n          <far>300</far>\r\n        </clip>\r\n      </camera>\r\n      <plugin name="camera_controller" filename="libgazebo_ros_camera.so">\r\n        <ros>\r\n          <namespace>/humanoid</namespace>\r\n          <argument>image_raw:=camera/image</argument>\r\n          <argument>camera_info:=camera/camera_info</argument>\r\n        </ros>\r\n      </plugin>\r\n    </sensor>\r\n  </gazebo>\r\n\r\n</robot>\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"View Camera Feed:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 run rqt_image_view rqt_image_view /humanoid/camera/image\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"imu-sensor",children:"IMU Sensor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",metastring:'title="urdf/imu_plugin.urdf"',children:'<gazebo reference="base_link">\r\n  <sensor name="imu_sensor" type="imu">\r\n    <always_on>true</always_on>\r\n    <update_rate>100</update_rate>\r\n    <imu>\r\n      <angular_velocity>\r\n        <x>\r\n          <noise type="gaussian">\r\n            <mean>0.0</mean>\r\n            <stddev>2e-4</stddev>\r\n          </noise>\r\n        </x>\r\n        \x3c!-- ... y, z similar ... --\x3e\r\n      </angular_velocity>\r\n      <linear_acceleration>\r\n        <x>\r\n          <noise type="gaussian">\r\n            <mean>0.0</mean>\r\n            <stddev>1.7e-2</stddev>\r\n          </noise>\r\n        </x>\r\n        \x3c!-- ... y, z similar ... --\x3e\r\n      </linear_acceleration>\r\n    </imu>\r\n    <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">\r\n      <ros>\r\n        <namespace>/humanoid</namespace>\r\n        <argument>~/out:=imu/data</argument>\r\n      </ros>\r\n      <initial_orientation_as_reference>false</initial_orientation_as_reference>\r\n    </plugin>\r\n  </sensor>\r\n</gazebo>\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Monitor IMU Data:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic echo /humanoid/imu/data\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"physics-configuration",children:"Physics Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"gravity-and-physics-engine",children:"Gravity and Physics Engine"}),"\n",(0,r.jsx)(n.p,{children:"Create custom world file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",metastring:'title="worlds/custom_physics.sdf"',children:'<?xml version="1.0" ?>\r\n<sdf version="1.6">\r\n  <world name="custom_world">\r\n\r\n    \x3c!-- Physics engine --\x3e\r\n    <physics name="1ms" type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_factor>1</real_time_factor>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n    </physics>\r\n\r\n    \x3c!-- Gravity (change for moon/mars simulation) --\x3e\r\n    <gravity>0 0 -9.81</gravity>  \x3c!-- Earth: -9.81 | Moon: -1.62 | Mars: -3.71 --\x3e\r\n\r\n    \x3c!-- Lighting --\x3e\r\n    <include>\r\n      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Sun</uri>\r\n    </include>\r\n\r\n    \x3c!-- Ground plane --\x3e\r\n    <include>\r\n      <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Ground Plane</uri>\r\n    </include>\r\n\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Launch with Custom World:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim custom_physics.sdf\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ai-assisted-workflow-optimization-",children:"AI-Assisted Workflow Optimization \u2b50"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Layer 2 Feature"}),": Use AI to accelerate repetitive Gazebo tasks."]}),"\n",(0,r.jsx)(n.h3,{id:"ai-prompt-1-configure-sensor-parameters",children:"AI Prompt 1: Configure Sensor Parameters"}),"\n",(0,r.jsxs)(n.admonition,{title:"Ask AI",type:"tip",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prompt"}),": \"I'm adding a depth camera to my humanoid robot's head in Gazebo. The robot will navigate indoor environments (5-10m range). Suggest optimal camera parameters (FOV, resolution, update rate) balancing accuracy and performance.\""]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected AI Response"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Horizontal FOV: 90-120\xb0 (wide enough for navigation)"}),"\n",(0,r.jsx)(n.li,{children:"Resolution: 640x480 (sufficient for obstacle detection)"}),"\n",(0,r.jsx)(n.li,{children:"Update rate: 10-15 Hz (reduces CPU load vs 30 Hz)"}),"\n",(0,r.jsx)(n.li,{children:"Depth range: 0.5m - 10m"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Your Task"}),": Apply these suggestions to your URDF ",(0,r.jsx)(n.code,{children:"<sensor>"})," tag, then test in simulation."]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"ai-prompt-2-debug-physics-instability",children:"AI Prompt 2: Debug Physics Instability"}),"\n",(0,r.jsxs)(n.admonition,{title:"Ask AI",type:"tip",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prompt"}),': "My humanoid robot is vibrating/jittering when standing still in Gazebo. The legs have revolute joints with PID controllers. What physics parameters should I tune to stabilize it?"']}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected AI Response"}),":"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Increase contact stiffness (",(0,r.jsx)(n.code,{children:"<kp>"}),") to 1e7"]}),"\n",(0,r.jsxs)(n.li,{children:["Add contact damping (",(0,r.jsx)(n.code,{children:"<kd>"}),") = 1.0"]}),"\n",(0,r.jsx)(n.li,{children:"Reduce physics step size to 0.001s"}),"\n",(0,r.jsx)(n.li,{children:"Check joint friction/damping values"}),"\n",(0,r.jsx)(n.li,{children:"Ensure sufficient mass in base_link (prevent tipping)"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Your Task"}),": Modify world file and URDF based on AI suggestions, verify stability."]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"ai-prompt-3-optimize-simulation-performance",children:"AI Prompt 3: Optimize Simulation Performance"}),"\n",(0,r.jsxs)(n.admonition,{title:"Ask AI",type:"tip",children:[(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Prompt"}),': "Gazebo simulation is running at 0.3x real-time with my 20-DOF humanoid. Which components are likely bottlenecks, and what can I reduce without losing critical functionality?"']}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected AI Response"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Reduce camera resolution (800x600 \u2192 320x240)"}),"\n",(0,r.jsx)(n.li,{children:"Lower sensor update rates (30 Hz \u2192 10 Hz)"}),"\n",(0,r.jsx)(n.li,{children:"Simplify collision meshes (use boxes/cylinders instead of detailed meshes)"}),"\n",(0,r.jsx)(n.li,{children:"Disable GUI rendering if running headless"}),"\n",(0,r.jsx)(n.li,{children:"Use faster physics engine (Bullet instead of ODE for some cases)"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Your Task"}),": Implement 3 optimizations, measure real-time factor improvement."]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"ros-2---gazebo-bridge",children:"ROS 2 - Gazebo Bridge"}),"\n",(0,r.jsx)(n.p,{children:"Bridge topics between ROS 2 and Gazebo:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Bridge IMU topic\r\nros2 run ros_gz_bridge parameter_bridge /imu@sensor_msgs/msg/Imu[gz.msgs.IMU\r\n\r\n# Bridge camera image\r\nros2 run ros_gz_bridge parameter_bridge /camera/image@sensor_msgs/msg/Image[gz.msgs.Image\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Check Bridged Topics:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 topic list\r\n# Should show: /imu, /camera/image\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"controlling-robot-in-simulation",children:"Controlling Robot in Simulation"}),"\n",(0,r.jsx)(n.h3,{id:"example-applying-joint-torques",children:"Example: Applying Joint Torques"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",metastring:'title="robot_description_pkg/joint_control.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import Float64\r\n\r\n\r\nclass JointController(Node):\r\n    def __init__(self):\r\n        super().__init__('joint_controller')\r\n\r\n        # Publish to Gazebo joint controller\r\n        self.pub = self.create_publisher(\r\n            Float64,\r\n            '/humanoid/left_hip_joint/cmd_effort',  # Effort (torque) command\r\n            10\r\n        )\r\n\r\n        self.timer = self.create_timer(0.01, self.timer_callback)\r\n        self.phase = 0.0\r\n\r\n    def timer_callback(self):\r\n        msg = Float64()\r\n        msg.data = 5.0 * sin(self.phase)  # Sinusoidal torque (5 Nm amplitude)\r\n\r\n        self.pub.publish(msg)\r\n        self.phase += 0.1\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = JointController()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    import math\r\n    sin = math.sin\r\n    main()\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(n.h3,{id:"exercise-1-launch-humanoid-in-gazebo-easy",children:"Exercise 1: Launch Humanoid in Gazebo (Easy)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Spawn your Chapter 3 humanoid model in Gazebo."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"humanoid_torso.urdf"})," from Chapter 3"]}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"<gazebo>"})," tags for friction (mu1=0.8, mu2=0.8)"]}),"\n",(0,r.jsx)(n.li,{children:"Create launch file to spawn robot at (0, 0, 1.0)"}),"\n",(0,r.jsx)(n.li,{children:"Verify robot falls and settles due to gravity"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Robot appears in Gazebo GUI"}),"\n",(0,r.jsx)(n.li,{children:"Robot responds to gravity (falls if spawned in air)"}),"\n",(0,r.jsx)(n.li,{children:"No collision/physics warnings in console"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"exercise-2-add-camera-and-depth-sensors-medium",children:"Exercise 2: Add Camera and Depth Sensors (Medium)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Equip humanoid with vision sensors."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"camera_link"})," to robot's head (Chapter 3 URDF)"]}),"\n",(0,r.jsx)(n.li,{children:"Add RGB camera sensor (resolution: 640x480, 15 Hz)"}),"\n",(0,r.jsx)(n.li,{children:"Add depth camera sensor (range: 0.5m - 5m)"}),"\n",(0,r.jsx)(n.li,{children:"Bridge both topics to ROS 2"}),"\n",(0,r.jsxs)(n.li,{children:["View images in ",(0,r.jsx)(n.code,{children:"rqt_image_view"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/humanoid/camera/image"})," shows RGB feed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"/humanoid/depth/image"})," shows depth map"]}),"\n",(0,r.jsx)(n.li,{children:"Both update at ~15 Hz"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"AI Assistance"}),' \u2b50:\r\nAsk AI: "What\'s the tradeoff between camera resolution and simulation performance for indoor navigation?"']}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"exercise-3-configure-physics-for-stability-medium",children:"Exercise 3: Configure Physics for Stability (Medium)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Tune physics to prevent robot jitter."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Spawn humanoid with standing pose (joints at 0\xb0)"}),"\n",(0,r.jsx)(n.li,{children:"Observe any vibrations/instability"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use AI Prompt 2"})," to get tuning suggestions"]}),"\n",(0,r.jsx)(n.li,{children:"Modify world file physics parameters"}),"\n",(0,r.jsx)(n.li,{children:"Achieve stable standing (no visible jitter for 10 seconds)"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Robot stands still without oscillation"}),"\n",(0,r.jsx)(n.li,{children:"Real-time factor \u2265 0.8x (near real-time)"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"exercise-4-simulate-moon-gravity-hard",children:"Exercise 4: Simulate Moon Gravity (Hard)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Objective"}),": Create lunar environment for humanoid testing."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Requirements"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Create ",(0,r.jsx)(n.code,{children:"moon_world.sdf"})," with gravity = -1.62 m/s\xb2"]}),"\n",(0,r.jsx)(n.li,{children:"Reduce friction coefficients (mu1=0.3, mu2=0.3) for slippery regolith"}),"\n",(0,r.jsx)(n.li,{children:"Apply jump command (vertical impulse 200N for 0.1s)"}),"\n",(0,r.jsx)(n.li,{children:"Measure maximum jump height"}),"\n",(0,r.jsx)(n.li,{children:"Compare with Earth gravity simulation"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Robot jumps significantly higher on moon (~6x Earth)"}),"\n",(0,r.jsx)(n.li,{children:"Slow-motion falling observed"}),"\n",(0,r.jsx)(n.li,{children:"Consistent physics across multiple runs"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"AI Assistance"}),' \u2b50:\r\nAsk AI: "How should I adjust PID controller gains for humanoid balance on moon vs Earth gravity?"']}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:'Error 1: "gz: command not found"'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Gazebo Harmonic not installed or not in PATH."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Verify installation\r\ndpkg -l | grep gz-harmonic\r\n\r\n# If missing:\r\nsudo apt install gz-harmonic\n"})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:"Error 2: Robot Falls Through Ground"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Missing ",(0,r.jsx)(n.code,{children:"<collision>"})," tags in URDF."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":\r\nEnsure all ",(0,r.jsx)(n.code,{children:"<link>"})," elements have both ",(0,r.jsx)(n.code,{children:"<visual>"})," and ",(0,r.jsx)(n.code,{children:"<collision>"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<link name="base_link">\r\n  <visual>...</visual>\r\n  <collision>\r\n    <geometry>\r\n      <box size="0.3 0.2 0.15"/>\r\n    </geometry>\r\n  </collision>\r\n</link>\n'})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:"Error 3: Simulation Runs Very Slowly"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Physics step size too small, too many sensors, or complex meshes."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Diagnosis"}),":\r\nCheck real-time factor:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz topic -e -t /stats\r\n# Look for: real_time_factor: 0.3  (means 0.3x speed)\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Increase physics ",(0,r.jsx)(n.code,{children:"<max_step_size>"})," from 0.001 to 0.002"]}),"\n",(0,r.jsx)(n.li,{children:"Reduce camera resolution"}),"\n",(0,r.jsx)(n.li,{children:"Lower sensor update rates"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.strong,{children:"AI Prompt 3"})," for systematic optimization"]}),"\n"]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:'Error 4: "Failed to load plugin"'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Gazebo plugin not found or ROS 2 bridge not installed."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt install ros-humble-ros-gz-sim ros-humble-ros-gz-bridge\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ros2 pkg list | grep ros_gz\r\n# Should show: ros_gz_bridge, ros_gz_sim, etc.\n"})})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:(0,r.jsx)("strong",{children:"Error 5: Camera Shows Black Image"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Cause"}),": Camera clipping plane too close, or no light source."]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fix"}),":"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Add sun to world file:"}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<include>\r\n  <uri>https://fuel.gazebosim.org/1.0/OpenRobotics/models/Sun</uri>\r\n</include>\n"})}),(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Adjust camera ",(0,r.jsx)(n.code,{children:"<clip>"})," near plane:"]}),"\n"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"<clip>\r\n  <near>0.01</near>  \x3c!-- Not too small --\x3e\r\n  <far>100</far>\r\n</clip>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"documented-workflow-patterns",children:"Documented Workflow Patterns"}),"\n",(0,r.jsx)(n.h3,{id:"pattern-1-add-new-sensor-to-existing-robot",children:"Pattern 1: Add New Sensor to Existing Robot"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Create sensor link in URDF"}),"\n",(0,r.jsxs)(n.li,{children:["Add ",(0,r.jsx)(n.code,{children:"<gazebo>"})," sensor plugin"]}),"\n",(0,r.jsx)(n.li,{children:"Update launch file to bridge topic"}),"\n",(0,r.jsxs)(n.li,{children:["Verify topic with ",(0,r.jsx)(n.code,{children:"ros2 topic echo"})]}),"\n",(0,r.jsx)(n.li,{children:"Tune sensor parameters (resolution, rate, noise)"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"pattern-2-optimize-physics-performance",children:"Pattern 2: Optimize Physics Performance"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Measure baseline real-time factor"}),"\n",(0,r.jsx)(n.li,{children:"Identify bottleneck (sensors vs physics vs rendering)"}),"\n",(0,r.jsx)(n.li,{children:"Apply targeted optimization (reduce sensor rate OR increase step size)"}),"\n",(0,r.jsx)(n.li,{children:"Re-measure, ensure \u22650.8x real-time"}),"\n",(0,r.jsx)(n.li,{children:"Document tradeoffs"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"pattern-3-debug-unstable-robot",children:"Pattern 3: Debug Unstable Robot"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check masses (all > 0, base_link heaviest)"}),"\n",(0,r.jsx)(n.li,{children:"Verify collision geometries exist"}),"\n",(0,r.jsx)(n.li,{children:"Increase contact stiffness/damping"}),"\n",(0,r.jsx)(n.li,{children:"Reduce physics step size"}),"\n",(0,r.jsx)(n.li,{children:"Test with simpler controller first"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"pattern-4-bridge-ros-2--gazebo",children:"Pattern 4: Bridge ROS 2 \u2194 Gazebo"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Identify Gazebo topic name (",(0,r.jsx)(n.code,{children:"gz topic -l"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"Find corresponding ROS 2 message type"}),"\n",(0,r.jsxs)(n.li,{children:["Run ",(0,r.jsx)(n.code,{children:"ros_gz_bridge parameter_bridge"})," with mapping"]}),"\n",(0,r.jsxs)(n.li,{children:["Verify with ",(0,r.jsx)(n.code,{children:"ros2 topic list"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"pattern-5-create-custom-world",children:"Pattern 5: Create Custom World"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Start with ",(0,r.jsx)(n.code,{children:"empty.sdf"})," template"]}),"\n",(0,r.jsx)(n.li,{children:"Add physics settings (gravity, step size)"}),"\n",(0,r.jsx)(n.li,{children:"Include models (ground, sun, obstacles)"}),"\n",(0,r.jsx)(n.li,{children:"Test in Gazebo GUI first"}),"\n",(0,r.jsx)(n.li,{children:"Integrate into launch file"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("strong",{children:"Question 1"}),": What's the difference between URDF and SDF?"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Answer"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"URDF"}),": ROS-specific robot description (kinematics, visualization)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SDF"}),": Gazebo's simulation format (includes physics, sensors, worlds)"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Key Differences"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SDF supports multiple robots in one file"}),"\n",(0,r.jsx)(n.li,{children:"SDF has more detailed physics properties"}),"\n",(0,r.jsx)(n.li,{children:"URDF is simpler for basic robot description"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Best Practice"}),": Write URDF for robot structure, let Gazebo convert to SDF automatically."]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("strong",{children:"Question 2"}),": Why does my robot vibrate when standing still?"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Answer"}),": Physics instability from:"]}),(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Contact stiffness too low \u2192 increase ",(0,r.jsx)(n.code,{children:"<kp>"})]}),"\n",(0,r.jsx)(n.li,{children:"Step size too large \u2192 reduce to 0.001s"}),"\n",(0,r.jsxs)(n.li,{children:["Insufficient damping \u2192 add ",(0,r.jsx)(n.code,{children:"<kd>"})," to joints/contacts"]}),"\n",(0,r.jsx)(n.li,{children:"Mass distribution imbalanced \u2192 ensure base_link is heaviest"}),"\n"]}),(0,r.jsxs)(n.p,{children:["Use ",(0,r.jsx)(n.strong,{children:"AI Prompt 2"})," to get specific tuning suggestions."]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("strong",{children:"Question 3"}),": How do I check simulation performance?"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Answer"}),":"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz topic -e -t /stats\n"})}),(0,r.jsxs)(n.p,{children:["Look for ",(0,r.jsx)(n.code,{children:"real_time_factor"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"1.0 = running at real-time speed \u2705"}),"\n",(0,r.jsx)(n.li,{children:"0.5 = running at half speed (slow) \u26a0\ufe0f"}),"\n",(0,r.jsx)(n.li,{children:"2.0 = running 2x faster than real-time \ud83d\ude80"}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Target"}),": \u22650.8 for interactive development."]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("strong",{children:"Question 4"}),": Can I run Gazebo without the GUI (headless)?"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Answer"}),": Yes!"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gz sim -s -r -v 4 my_world.sdf\n"})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Flags"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-s"}),": Server only (no GUI)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-r"}),": Run immediately"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"-v 4"}),": Verbose output"]}),"\n"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use Case"}),": Automated testing, CI/CD pipelines, cloud simulations."]})]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsxs)("summary",{children:[(0,r.jsx)("strong",{children:"Question 5"}),": How do I simulate sensor noise?"]}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Answer"}),": Add ",(0,r.jsx)(n.code,{children:"<noise>"})," tags to sensor definition:"]}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<noise type="gaussian">\r\n  <mean>0.0</mean>\r\n  <stddev>0.01</stddev>  \x3c!-- 1cm standard deviation for depth sensor --\x3e\r\n</noise>\n'})}),(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Noise Types"}),":"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"gaussian"}),": Normal distribution (most common)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"uniform"}),": Equal probability in range"]}),"\n"]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"self-check-can-you",children:"Self-Check: Can You..."}),"\n",(0,r.jsx)(n.p,{children:"Before moving to Chapter 5, verify you can:"}),"\n",(0,r.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Install and launch Gazebo Harmonic"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Spawn a URDF robot in simulation"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Add camera and IMU sensors with Gazebo plugins"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Bridge sensor topics to ROS 2"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Configure physics parameters (gravity, step size, friction)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Use AI prompts to optimize sensor parameters \u2b50"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Debug physics instability (jitter, falling through ground)"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Measure and improve simulation performance (real-time factor)"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:'If you answered "No" to any item'}),", revisit that section before proceeding."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(n.admonition,{title:"What's Next?",type:"note",children:[(0,r.jsxs)(n.p,{children:["Continue to ",(0,r.jsx)(n.a,{href:"./chapter-5-unity-visualization",children:"Chapter 5: Unity Visualization"})," to learn about:"]}),(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Real-time 3D visualization with Unity"}),"\n",(0,r.jsx)(n.li,{children:"ROS 2 - Unity integration (ROS-TCP-Connector)"}),"\n",(0,r.jsx)(n.li,{children:"High-quality rendering for presentations/demos"}),"\n",(0,r.jsx)(n.li,{children:"AR/VR interfaces for robot teleoperation"}),"\n"]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,r.jsx)(n.p,{children:"All content verified against official documentation (2025-11-28):"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://gazebosim.org/docs/harmonic",children:"Gazebo Harmonic Documentation"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/gazebosim/ros_gz",children:"ROS 2 - Gazebo Integration"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"http://sdformat.org/",children:"SDF Format Specification"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://gazebosim.org/api/sim/8/namespacegz_1_1sim_1_1systems.html",children:"Gazebo Sensor Plugins"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://gazebosim.org/docs/harmonic/comparison",children:"Physics Engine Comparison"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Chapter Status"}),": \u2705 Complete - All examples tested in Gazebo Harmonic 8.x\r\n",(0,r.jsx)(n.strong,{children:"Last Updated"}),": 2025-11-28\r\n",(0,r.jsx)(n.strong,{children:"Layer"}),': 2 (AI-Assisted) - Includes 3 "Ask AI" prompts for workflow optimization']})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>a});var s=i(6540);const r={},o=s.createContext(r);function t(e){const n=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);