"use strict";(globalThis.webpackChunkphysical_ai_humanoid_textbook=globalThis.webpackChunkphysical_ai_humanoid_textbook||[]).push([[6072],{2936:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"chapter-2-ros2-fundamentals","title":"Chapter 2: ROS 2 Fundamentals","description":"Master ROS 2 core concepts: nodes, topics, publishers, subscribers, and QoS policies. Build your first robot communication system.\\n","source":"@site/docs/002-chapter-2-ros2-fundamentals.md","sourceDirName":".","slug":"/chapter-2-ros2-fundamentals","permalink":"/physical-ai-humanoid-textbook/chapter-2-ros2-fundamentals","draft":false,"unlisted":false,"editUrl":"https://github.com/AlishbaFatima12/physical-ai-humanoid-textbook/edit/main/docs/docs/002-chapter-2-ros2-fundamentals.md","tags":[{"inline":true,"label":"layer1","permalink":"/physical-ai-humanoid-textbook/tags/layer-1"},{"inline":true,"label":"ros2","permalink":"/physical-ai-humanoid-textbook/tags/ros-2"},{"inline":true,"label":"foundation","permalink":"/physical-ai-humanoid-textbook/tags/foundation"}],"version":"current","lastUpdatedBy":"AlishbaFatima12","lastUpdatedAt":1764391712000,"sidebarPosition":2,"frontMatter":{"id":"chapter-2-ros2-fundamentals","title":"Chapter 2: ROS 2 Fundamentals","sidebar_position":2,"description":"Master ROS 2 core concepts: nodes, topics, publishers, subscribers, and QoS policies. Build your first robot communication system.\\n","keywords":["ROS 2","nodes","topics","publishers","subscribers","QoS","rclpy"],"tags":["layer1","ros2","foundation"]},"sidebar":"tutorialSidebar","previous":{"title":"Chapter 1: Introduction to Physical AI","permalink":"/physical-ai-humanoid-textbook/chapter-1-introduction-physical-ai"},"next":{"title":"Chapter 3: ROS 2 Packages & URDF","permalink":"/physical-ai-humanoid-textbook/chapter-3-ros2-packages-urdf"}}');var i=n(4848),l=n(8453);const c={id:"chapter-2-ros2-fundamentals",title:"Chapter 2: ROS 2 Fundamentals",sidebar_position:2,description:"Master ROS 2 core concepts: nodes, topics, publishers, subscribers, and QoS policies. Build your first robot communication system.\n",keywords:["ROS 2","nodes","topics","publishers","subscribers","QoS","rclpy"],tags:["layer1","ros2","foundation"]},t="Chapter 2: ROS 2 Fundamentals",o={},a=[{value:"Overview",id:"overview",level:2},{value:"What is ROS 2?",id:"what-is-ros-2",level:2},{value:"Key Architecture Components",id:"key-architecture-components",level:3},{value:"Your First ROS 2 Node",id:"your-first-ros-2-node",level:2},{value:"1. Minimal Publisher Node",id:"1-minimal-publisher-node",level:3},{value:"2. Minimal Subscriber Node",id:"2-minimal-subscriber-node",level:3},{value:"3. Running the Nodes",id:"3-running-the-nodes",level:3},{value:"ROS 2 Command-Line Tools",id:"ros-2-command-line-tools",level:2},{value:"Inspecting Active Nodes",id:"inspecting-active-nodes",level:3},{value:"Inspecting Topics",id:"inspecting-topics",level:3},{value:"Quality of Service (QoS) Policies",id:"quality-of-service-qos-policies",level:2},{value:"QoS Policy Types",id:"qos-policy-types",level:3},{value:"Example: Publisher with Custom QoS",id:"example-publisher-with-custom-qos",level:3},{value:"Example: Subscriber with Matching QoS",id:"example-subscriber-with-matching-qos",level:3},{value:"Building ROS 2 Packages with Colcon",id:"building-ros-2-packages-with-colcon",level:2},{value:"1. Create a Workspace",id:"1-create-a-workspace",level:3},{value:"2. Create a Package",id:"2-create-a-package",level:3},{value:"3. Add Your Publisher Node",id:"3-add-your-publisher-node",level:3},{value:"4. Update <code>setup.py</code>",id:"4-update-setuppy",level:3},{value:"5. Build the Workspace",id:"5-build-the-workspace",level:3},{value:"6. Source the Workspace",id:"6-source-the-workspace",level:3},{value:"7. Run the Packaged Node",id:"7-run-the-packaged-node",level:3},{value:"Using Standard ROS 2 Message Types",id:"using-standard-ros-2-message-types",level:2},{value:"Example: Publishing Sensor Data",id:"example-publishing-sensor-data",level:3},{value:"Namespaces and Remapping",id:"namespaces-and-remapping",level:2},{value:"Running Node in a Namespace",id:"running-node-in-a-namespace",level:3},{value:"Remapping Topic Names",id:"remapping-topic-names",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: Create a Temperature Monitor (Easy)",id:"exercise-1-create-a-temperature-monitor-easy",level:3},{value:"Exercise 2: Build a Speed Controller (Medium)",id:"exercise-2-build-a-speed-controller-medium",level:3},{value:"Exercise 3: Debug QoS Mismatch (Medium)",id:"exercise-3-debug-qos-mismatch-medium",level:3},{value:"Exercise 4: Multi-Node Temperature System (Hard)",id:"exercise-4-multi-node-temperature-system-hard",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"ROS 2 Node Graph Visualization",id:"ros-2-node-graph-visualization",level:2},{value:"Assessment Questions",id:"assessment-questions",level:2},{value:"Self-Check: Can You...",id:"self-check-can-you",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"References",id:"references",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"chapter-2-ros-2-fundamentals",children:"Chapter 2: ROS 2 Fundamentals"})}),"\n",(0,i.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Learning Objectives:"})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Create and execute ROS 2 nodes using rclpy (Python client library)"}),"\n",(0,i.jsx)(s.li,{children:"Implement publisher-subscriber communication patterns"}),"\n",(0,i.jsx)(s.li,{children:"Configure Quality of Service (QoS) policies for reliable message delivery"}),"\n",(0,i.jsx)(s.li,{children:"Debug common ROS 2 communication issues (namespace, topic mismatch, QoS incompatibility)"}),"\n",(0,i.jsx)(s.li,{children:"Build and run ROS 2 packages using colcon build system"}),"\n"]}),"\n",(0,i.jsx)(s.admonition,{title:"Prerequisites",type:"info",children:(0,i.jsxs)(s.p,{children:["Complete ",(0,i.jsx)(s.a,{href:"./chapter-1-introduction-physical-ai",children:"Chapter 1"})," - Environment setup validated"]})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Estimated Duration"}),": 6 hours (lecture + lab)"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Layer Enforcement"}),": This is a ",(0,i.jsx)(s.strong,{children:"Layer 1 (Foundation)"})," chapter. NO AI assistance prompts are provided. You must execute all exercises independently to build fundamental skills."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"what-is-ros-2",children:"What is ROS 2?"}),"\n",(0,i.jsxs)(s.p,{children:["ROS 2 (Robot Operating System 2) is a middleware framework for building robot software. Unlike ROS 1, ROS 2 uses ",(0,i.jsx)(s.strong,{children:"DDS (Data Distribution Service)"})," as its underlying communication layer, providing:"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Real-time support"}),": Deterministic communication for safety-critical systems"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"No central master"}),": Nodes discover each other via DDS"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Cross-platform"}),": Runs on Linux, Windows, macOS"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Security"}),": Built-in encryption and authentication (SROS2)"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"key-architecture-components",children:"Key Architecture Components"}),"\n",(0,i.jsx)(s.mermaid,{value:'graph TB\r\n    subgraph "ROS 2 Application Layer"\r\n        N1[Node 1<br/>Publisher]\r\n        N2[Node 2<br/>Subscriber]\r\n        N3[Node 3<br/>Service Server]\r\n    end\r\n\r\n    subgraph "ROS 2 Client Libraries"\r\n        RCLPY[rclpy - Python]\r\n        RCLCPP[rclcpp - C++]\r\n    end\r\n\r\n    subgraph "ROS 2 Middleware (rmw)"\r\n        RMW[rmw Interface]\r\n    end\r\n\r\n    subgraph "DDS Implementations"\r\n        FAST[Fast DDS]\r\n        CYCL[CycloneDDS]\r\n    end\r\n\r\n    N1 --\x3e RCLPY\r\n    N2 --\x3e RCLPY\r\n    N3 --\x3e RCLCPP\r\n    RCLPY --\x3e RMW\r\n    RCLCPP --\x3e RMW\r\n    RMW --\x3e FAST\r\n    RMW --\x3e CYCL\r\n\r\n    style N1 fill:#4CAF50\r\n    style N2 fill:#2196F3\r\n    style N3 fill:#FF9800'}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Core Concepts:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Node"}),": A process that performs computation (e.g., sensor driver, motion planner)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Topic"}),": Named channel for asynchronous message passing"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Message"}),": Data structure (e.g., ",(0,i.jsx)(s.code,{children:"sensor_msgs/LaserScan"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"QoS (Quality of Service)"}),": Policies controlling reliability, durability, and history"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"your-first-ros-2-node",children:"Your First ROS 2 Node"}),"\n",(0,i.jsx)(s.h3,{id:"1-minimal-publisher-node",children:"1. Minimal Publisher Node"}),"\n",(0,i.jsx)(s.p,{children:"Let's create a simple publisher that sends string messages to a topic."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="src/my_first_pkg/my_first_pkg/minimal_publisher.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass MinimalPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_publisher')\r\n\r\n        # Create a publisher on topic 'topic' with message type String\r\n        self.publisher_ = self.create_publisher(String, 'topic', 10)\r\n\r\n        # Create a timer that calls timer_callback() every 0.5 seconds\r\n        timer_period = 0.5  # seconds\r\n        self.timer = self.create_timer(timer_period, self.timer_callback)\r\n\r\n        self.i = 0  # Message counter\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Hello World: {self.i}'\r\n\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Publishing: \"{msg.data}\"')\r\n\r\n        self.i += 1\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    minimal_publisher = MinimalPublisher()\r\n\r\n    try:\r\n        rclpy.spin(minimal_publisher)\r\n    except KeyboardInterrupt:\r\n        pass\r\n\r\n    minimal_publisher.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Key Components Explained:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"Node('minimal_publisher')"}),': Creates a node with name "minimal_publisher"']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"create_publisher(String, 'topic', 10)"}),": Creates publisher with queue size 10"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"create_timer(0.5, callback)"}),": Calls ",(0,i.jsx)(s.code,{children:"timer_callback()"})," every 0.5 seconds"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"rclpy.spin(node)"}),": Keeps the node alive to process callbacks"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"2-minimal-subscriber-node",children:"2. Minimal Subscriber Node"}),"\n",(0,i.jsx)(s.p,{children:"Now create a subscriber that listens to the same topic."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="src/my_first_pkg/my_first_pkg/minimal_subscriber.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass MinimalSubscriber(Node):\r\n    def __init__(self):\r\n        super().__init__('minimal_subscriber')\r\n\r\n        # Create a subscription on topic 'topic' with message type String\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'topic',\r\n            self.listener_callback,\r\n            10\r\n        )\r\n        self.subscription  # Prevent unused variable warning\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'I heard: \"{msg.data}\"')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n\r\n    minimal_subscriber = MinimalSubscriber()\r\n\r\n    try:\r\n        rclpy.spin(minimal_subscriber)\r\n    except KeyboardInterrupt:\r\n        pass\r\n\r\n    minimal_subscriber.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Key Components Explained:"})}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"create_subscription(String, 'topic', callback, 10)"}),": Subscribes to topic"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"listener_callback(msg)"}),": Called automatically when a message arrives"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"msg.data"}),": Accesses the string data from the message"]}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"3-running-the-nodes",children:"3. Running the Nodes"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Terminal 1 (Publisher):"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"python3 minimal_publisher.py\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'[INFO] [minimal_publisher]: Publishing: "Hello World: 0"\r\n[INFO] [minimal_publisher]: Publishing: "Hello World: 1"\r\n[INFO] [minimal_publisher]: Publishing: "Hello World: 2"\n'})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Terminal 2 (Subscriber):"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"python3 minimal_subscriber.py\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:'[INFO] [minimal_subscriber]: I heard: "Hello World: 0"\r\n[INFO] [minimal_subscriber]: I heard: "Hello World: 1"\r\n[INFO] [minimal_subscriber]: I heard: "Hello World: 2"\n'})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"ros-2-command-line-tools",children:"ROS 2 Command-Line Tools"}),"\n",(0,i.jsx)(s.p,{children:"While your nodes are running, open a third terminal and explore these diagnostic tools."}),"\n",(0,i.jsx)(s.h3,{id:"inspecting-active-nodes",children:"Inspecting Active Nodes"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# List all active nodes\r\nros2 node list\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/minimal_publisher\r\n/minimal_subscriber\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Get detailed node information:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 node info /minimal_publisher\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/minimal_publisher\r\n  Subscribers:\r\n\r\n  Publishers:\r\n    /topic: std_msgs/msg/String\r\n  Service Servers:\r\n\r\n  Service Clients:\r\n\r\n  Action Servers:\r\n\r\n  Action Clients:\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"inspecting-topics",children:"Inspecting Topics"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# List all active topics\r\nros2 topic list\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"/parameter_events\r\n/rosout\r\n/topic\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"View topic details:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /topic\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Type: std_msgs/msg/String\r\nPublisher count: 1\r\nSubscription count: 1\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Echo topic messages (see live data):"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /topic\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output (streaming):"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"data: Hello World: 45\r\n---\r\ndata: Hello World: 46\r\n---\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Measure topic frequency:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic hz /topic\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"average rate: 2.000\r\n        min: 0.499s max: 0.501s std dev: 0.001s window: 10\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"quality-of-service-qos-policies",children:"Quality of Service (QoS) Policies"}),"\n",(0,i.jsx)(s.p,{children:"QoS policies control the reliability, durability, and history of messages. Mismatched QoS between publisher and subscriber prevents communication."}),"\n",(0,i.jsx)(s.h3,{id:"qos-policy-types",children:"QoS Policy Types"}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Policy"}),(0,i.jsx)(s.th,{children:"Options"}),(0,i.jsx)(s.th,{children:"Purpose"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Reliability"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"RELIABLE"}),", ",(0,i.jsx)(s.code,{children:"BEST_EFFORT"})]}),(0,i.jsx)(s.td,{children:"Guaranteed delivery vs. speed"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Durability"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"TRANSIENT_LOCAL"}),", ",(0,i.jsx)(s.code,{children:"VOLATILE"})]}),(0,i.jsx)(s.td,{children:"Store messages for late-joining subscribers"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"History"})}),(0,i.jsxs)(s.td,{children:[(0,i.jsx)(s.code,{children:"KEEP_LAST"}),", ",(0,i.jsx)(s.code,{children:"KEEP_ALL"})]}),(0,i.jsx)(s.td,{children:"How many messages to queue"})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:(0,i.jsx)(s.strong,{children:"Depth"})}),(0,i.jsx)(s.td,{children:"Integer (e.g., 10)"}),(0,i.jsxs)(s.td,{children:["Queue size when using ",(0,i.jsx)(s.code,{children:"KEEP_LAST"})]})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"example-publisher-with-custom-qos",children:"Example: Publisher with Custom QoS"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="publisher_with_qos.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy, HistoryPolicy\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass PublisherWithQoS(Node):\r\n    def __init__(self):\r\n        super().__init__('publisher_with_qos')\r\n\r\n        # Define custom QoS profile\r\n        qos_profile = QoSProfile(\r\n            reliability=ReliabilityPolicy.RELIABLE,  # Guaranteed delivery\r\n            durability=DurabilityPolicy.TRANSIENT_LOCAL,  # Store for late joiners\r\n            history=HistoryPolicy.KEEP_LAST,\r\n            depth=10\r\n        )\r\n\r\n        self.publisher_ = self.create_publisher(\r\n            String,\r\n            'reliable_topic',\r\n            qos_profile\r\n        )\r\n\r\n        self.timer = self.create_timer(1.0, self.timer_callback)\r\n        self.i = 0\r\n\r\n    def timer_callback(self):\r\n        msg = String()\r\n        msg.data = f'Reliable message {self.i}'\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Published: {msg.data}')\r\n        self.i += 1\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = PublisherWithQoS()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"example-subscriber-with-matching-qos",children:"Example: Subscriber with Matching QoS"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="subscriber_with_qos.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy, HistoryPolicy\r\nfrom std_msgs.msg import String\r\n\r\n\r\nclass SubscriberWithQoS(Node):\r\n    def __init__(self):\r\n        super().__init__('subscriber_with_qos')\r\n\r\n        # MUST match publisher's QoS profile\r\n        qos_profile = QoSProfile(\r\n            reliability=ReliabilityPolicy.RELIABLE,\r\n            durability=DurabilityPolicy.TRANSIENT_LOCAL,\r\n            history=HistoryPolicy.KEEP_LAST,\r\n            depth=10\r\n        )\r\n\r\n        self.subscription = self.create_subscription(\r\n            String,\r\n            'reliable_topic',\r\n            self.listener_callback,\r\n            qos_profile\r\n        )\r\n\r\n    def listener_callback(self, msg):\r\n        self.get_logger().info(f'Received: {msg.data}')\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = SubscriberWithQoS()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Testing QoS Mismatch:"})}),"\n",(0,i.jsxs)(s.p,{children:["If subscriber uses ",(0,i.jsx)(s.code,{children:"BEST_EFFORT"})," while publisher uses ",(0,i.jsx)(s.code,{children:"RELIABLE"}),", they won't communicate. Check compatibility:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic info /reliable_topic --verbose\n"})}),"\n",(0,i.jsx)(s.p,{children:"Look for QoS incompatibility warnings in the output."}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"building-ros-2-packages-with-colcon",children:"Building ROS 2 Packages with Colcon"}),"\n",(0,i.jsxs)(s.p,{children:["So far we ran Python scripts directly. In production, you organize code into ",(0,i.jsx)(s.strong,{children:"packages"})," built with ",(0,i.jsx)(s.strong,{children:"colcon"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"1-create-a-workspace",children:"1. Create a Workspace"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"mkdir -p ~/ros2_ws/src\r\ncd ~/ros2_ws/src\n"})}),"\n",(0,i.jsx)(s.h3,{id:"2-create-a-package",children:"2. Create a Package"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 pkg create --build-type ament_python my_first_pkg --dependencies rclpy std_msgs\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Generated Structure:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"my_first_pkg/\r\n\u251c\u2500\u2500 package.xml              # Package metadata\r\n\u251c\u2500\u2500 setup.py                 # Python setup file\r\n\u251c\u2500\u2500 setup.cfg\r\n\u251c\u2500\u2500 resource/\r\n\u2514\u2500\u2500 my_first_pkg/\r\n    \u2514\u2500\u2500 __init__.py\n"})}),"\n",(0,i.jsx)(s.h3,{id:"3-add-your-publisher-node",children:"3. Add Your Publisher Node"}),"\n",(0,i.jsxs)(s.p,{children:["Move ",(0,i.jsx)(s.code,{children:"minimal_publisher.py"})," to ",(0,i.jsx)(s.code,{children:"my_first_pkg/my_first_pkg/minimal_publisher.py"})," (created earlier)."]}),"\n",(0,i.jsxs)(s.h3,{id:"4-update-setuppy",children:["4. Update ",(0,i.jsx)(s.code,{children:"setup.py"})]}),"\n",(0,i.jsxs)(s.p,{children:["Edit ",(0,i.jsx)(s.code,{children:"setup.py"})," to register the executable:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="setup.py" {15-18}',children:"from setuptools import setup\r\n\r\npackage_name = 'my_first_pkg'\r\n\r\nsetup(\r\n    name=package_name,\r\n    version='0.0.1',\r\n    packages=[package_name],\r\n    data_files=[\r\n        ('share/ament_index/resource_index/packages',\r\n            ['resource/' + package_name]),\r\n        ('share/' + package_name, ['package.xml']),\r\n    ],\r\n    install_requires=['setuptools'],\r\n    entry_points={\r\n        'console_scripts': [\r\n            'minimal_publisher = my_first_pkg.minimal_publisher:main',\r\n            'minimal_subscriber = my_first_pkg.minimal_subscriber:main',\r\n        ],\r\n    },\r\n)\n"})}),"\n",(0,i.jsx)(s.h3,{id:"5-build-the-workspace",children:"5. Build the Workspace"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\r\ncolcon build --packages-select my_first_pkg\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Expected Output:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"Starting >>> my_first_pkg\r\nFinished <<< my_first_pkg [0.85s]\r\n\r\nSummary: 1 package finished [1.12s]\n"})}),"\n",(0,i.jsx)(s.h3,{id:"6-source-the-workspace",children:"6. Source the Workspace"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source ~/ros2_ws/install/setup.bash\n"})}),"\n",(0,i.jsx)(s.h3,{id:"7-run-the-packaged-node",children:"7. Run the Packaged Node"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_pkg minimal_publisher\n"})}),"\n",(0,i.jsx)(s.p,{children:"Now your node is a proper ROS 2 package that can be shared and installed!"}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"using-standard-ros-2-message-types",children:"Using Standard ROS 2 Message Types"}),"\n",(0,i.jsx)(s.p,{children:"ROS 2 provides pre-defined message types for common robotics data."}),"\n",(0,i.jsx)(s.h3,{id:"example-publishing-sensor-data",children:"Example: Publishing Sensor Data"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",metastring:'title="imu_publisher.py"',children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import Imu\r\nimport math\r\n\r\n\r\nclass ImuPublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('imu_publisher')\r\n        self.publisher_ = self.create_publisher(Imu, 'imu/data', 10)\r\n        self.timer = self.create_timer(0.1, self.timer_callback)  # 10 Hz\r\n        self.angle = 0.0\r\n\r\n    def timer_callback(self):\r\n        msg = Imu()\r\n\r\n        # Populate header\r\n        msg.header.stamp = self.get_clock().now().to_msg()\r\n        msg.header.frame_id = 'imu_link'\r\n\r\n        # Populate orientation (quaternion)\r\n        msg.orientation.x = 0.0\r\n        msg.orientation.y = 0.0\r\n        msg.orientation.z = math.sin(self.angle / 2)\r\n        msg.orientation.w = math.cos(self.angle / 2)\r\n\r\n        # Populate angular velocity\r\n        msg.angular_velocity.x = 0.0\r\n        msg.angular_velocity.y = 0.0\r\n        msg.angular_velocity.z = 0.1  # rad/s\r\n\r\n        # Populate linear acceleration\r\n        msg.linear_acceleration.x = 0.0\r\n        msg.linear_acceleration.y = 0.0\r\n        msg.linear_acceleration.z = 9.81  # gravity\r\n\r\n        self.publisher_.publish(msg)\r\n        self.get_logger().info(f'Published IMU data (angle: {self.angle:.2f} rad)')\r\n\r\n        self.angle += 0.01  # Increment angle\r\n\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = ImuPublisher()\r\n    rclpy.spin(node)\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Check message structure:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 interface show sensor_msgs/msg/Imu\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"namespaces-and-remapping",children:"Namespaces and Remapping"}),"\n",(0,i.jsx)(s.p,{children:"Namespaces organize nodes in multi-robot systems."}),"\n",(0,i.jsx)(s.h3,{id:"running-node-in-a-namespace",children:"Running Node in a Namespace"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_pkg minimal_publisher --ros-args -r __ns:=/robot1\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Topic name becomes"}),": ",(0,i.jsx)(s.code,{children:"/robot1/topic"})]}),"\n",(0,i.jsx)(s.h3,{id:"remapping-topic-names",children:"Remapping Topic Names"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_pkg minimal_publisher --ros-args -r topic:=chatter\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Topic name becomes"}),": ",(0,i.jsx)(s.code,{children:"/chatter"})]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Combine namespace + remapping:"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 run my_first_pkg minimal_publisher --ros-args -r __ns:=/robot1 -r topic:=chatter\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Topic name becomes"}),": ",(0,i.jsx)(s.code,{children:"/robot1/chatter"})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"exercises",children:"Exercises"}),"\n",(0,i.jsx)(s.h3,{id:"exercise-1-create-a-temperature-monitor-easy",children:"Exercise 1: Create a Temperature Monitor (Easy)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Objective"}),": Build a publisher that simulates temperature sensor data."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Requirements"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Create a node ",(0,i.jsx)(s.code,{children:"temp_publisher"})," that publishes to ",(0,i.jsx)(s.code,{children:"/sensor/temperature"})]}),"\n",(0,i.jsxs)(s.li,{children:["Use message type ",(0,i.jsx)(s.code,{children:"std_msgs/msg/Float32"})]}),"\n",(0,i.jsx)(s.li,{children:"Simulate temperature readings between 20.0\xb0C and 30.0\xb0C"}),"\n",(0,i.jsx)(s.li,{children:"Publish at 1 Hz (every 1 second)"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Running ",(0,i.jsx)(s.code,{children:"ros2 topic echo /sensor/temperature"})," shows values between 20.0 and 30.0"]}),"\n",(0,i.jsxs)(s.li,{children:["Running ",(0,i.jsx)(s.code,{children:"ros2 topic hz /sensor/temperature"})," shows ~1.0 Hz"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"$ ros2 topic echo /sensor/temperature\r\ndata: 23.4\r\n---\r\ndata: 25.1\r\n---\n"})}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:"Hint"}),(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.code,{children:"random.uniform(20.0, 30.0)"})," to generate random temperatures."]})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"exercise-2-build-a-speed-controller-medium",children:"Exercise 2: Build a Speed Controller (Medium)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Objective"}),": Create a publisher-subscriber pair for robot speed control."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Requirements"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"speed_commander.py"}),": Publishes target speed to ",(0,i.jsx)(s.code,{children:"/cmd_vel_target"})," (type: ",(0,i.jsx)(s.code,{children:"std_msgs/msg/Float32"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"speed_monitor.py"}),": Subscribes to ",(0,i.jsx)(s.code,{children:"/cmd_vel_target"}),' and logs "Speed command received: X m/s"']}),"\n",(0,i.jsxs)(s.li,{children:["Implement safety check: If speed > 0.5 m/s, log ",(0,i.jsx)(s.strong,{children:"WARNING"})," instead of INFO"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Both nodes run without errors"}),"\n",(0,i.jsx)(s.li,{children:"Subscriber logs all received speed commands"}),"\n",(0,i.jsx)(s.li,{children:"Speed > 0.5 m/s triggers warning message"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output (Subscriber)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"[INFO] [speed_monitor]: Speed command received: 0.3 m/s\r\n[WARN] [speed_monitor]: UNSAFE SPEED: 0.8 m/s (max: 0.5 m/s)\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"exercise-3-debug-qos-mismatch-medium",children:"Exercise 3: Debug QoS Mismatch (Medium)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Objective"}),": Experience and fix a QoS incompatibility issue."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Setup"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"publisher_reliable.py"})," with ",(0,i.jsx)(s.code,{children:"ReliabilityPolicy.RELIABLE"})]}),"\n",(0,i.jsxs)(s.li,{children:["Create ",(0,i.jsx)(s.code,{children:"subscriber_best_effort.py"})," with ",(0,i.jsx)(s.code,{children:"ReliabilityPolicy.BEST_EFFORT"})]}),"\n",(0,i.jsxs)(s.li,{children:["Run both nodes - ",(0,i.jsx)(s.strong,{children:"they won't communicate!"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Requirements"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Run ",(0,i.jsx)(s.code,{children:"ros2 topic info /topic --verbose"})," to diagnose the issue"]}),"\n",(0,i.jsx)(s.li,{children:"Fix the subscriber's QoS to match the publisher"}),"\n",(0,i.jsx)(s.li,{children:"Verify messages are received"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Initially: Subscriber receives NO messages"}),"\n",(0,i.jsx)(s.li,{children:"After fix: Subscriber receives all messages"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Diagnostic Output"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"$ ros2 topic info /topic --verbose\r\n...\r\nQoS profile:\r\n  Reliability: RELIABLE\r\n  Durability: VOLATILE\r\n  ...\r\n\r\nSubscriptions:\r\n  QoS profile:\r\n    Reliability: BEST_EFFORT  # <-- MISMATCH!\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h3,{id:"exercise-4-multi-node-temperature-system-hard",children:"Exercise 4: Multi-Node Temperature System (Hard)"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Objective"}),": Build a 3-node system simulating a temperature control loop."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Requirements"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Sensor Node"}),": Publishes to ",(0,i.jsx)(s.code,{children:"/sensor/temp"})," (type: ",(0,i.jsx)(s.code,{children:"std_msgs/msg/Float32"}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Controller Node"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Subscribes to ",(0,i.jsx)(s.code,{children:"/sensor/temp"})]}),"\n",(0,i.jsxs)(s.li,{children:["Publishes to ",(0,i.jsx)(s.code,{children:"/actuator/power"})," (type: ",(0,i.jsx)(s.code,{children:"std_msgs/msg/Float32"}),")"]}),"\n",(0,i.jsx)(s.li,{children:"Logic: If temp > 25.0\xb0C, output power = -1.0 (cooling). Else output 1.0 (heating)."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Monitor Node"}),': Subscribes to both topics and logs "Temp: X\xb0C, Power: Y"']}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Acceptance Criteria"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"All 3 nodes run simultaneously"}),"\n",(0,i.jsx)(s.li,{children:"Monitor shows correlated temp/power data"}),"\n",(0,i.jsx)(s.li,{children:"Controller responds correctly to temperature thresholds"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Expected Output (Monitor Node)"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"[INFO] [monitor]: Temp: 27.3\xb0C, Power: -1.0 (COOLING)\r\n[INFO] [monitor]: Temp: 23.1\xb0C, Power: 1.0 (HEATING)\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Error 1: \"No module named 'rclpy'\""})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Cause"}),": ROS 2 environment not sourced."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Fix"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"source /opt/ros/humble/setup.bash\n"})}),(0,i.jsxs)(s.p,{children:["Add to ",(0,i.jsx)(s.code,{children:"~/.bashrc"})," to make permanent:"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'echo "source /opt/ros/humble/setup.bash" >> ~/.bashrc\n'})})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Error 2: \"Package 'my_first_pkg' not found\""})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Cause"}),": Workspace not sourced after ",(0,i.jsx)(s.code,{children:"colcon build"}),"."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Fix"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"cd ~/ros2_ws\r\nsource install/setup.bash\n"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Verification"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 pkg list | grep my_first_pkg\n"})}),(0,i.jsxs)(s.p,{children:["Should output: ",(0,i.jsx)(s.code,{children:"my_first_pkg"})]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:"Error 3: Subscriber Receives No Messages"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Possible Causes"}),":"]}),(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Topic name mismatch"}),": Publisher uses ",(0,i.jsx)(s.code,{children:"/topic"}),", subscriber uses ",(0,i.jsx)(s.code,{children:"/topic2"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Namespace mismatch"}),": Publisher in ",(0,i.jsx)(s.code,{children:"/robot1"}),", subscriber in default namespace"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"QoS incompatibility"}),": Reliability or durability mismatch"]}),"\n"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Diagnosis"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Check publisher's topic\r\nros2 node info /minimal_publisher\r\n\r\n# Check subscriber's topic\r\nros2 node info /minimal_subscriber\r\n\r\n# Check QoS policies\r\nros2 topic info /topic --verbose\n"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Fix"}),": Ensure topic names and QoS profiles match exactly."]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:'Error 4: "SetuptoolsDeprecationWarning"'})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Cause"}),": Deprecated ",(0,i.jsx)(s.code,{children:"setup.py"})," syntax in ROS 2 packages."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Impact"}),": Warning only - node still runs correctly."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Fix (optional)"}),":\r\nUpdate ",(0,i.jsx)(s.code,{children:"setup.py"})," to use modern setuptools syntax:"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from setuptools import find_packages, setup\n"})})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsx)("summary",{children:(0,i.jsx)("strong",{children:'Error 5: "colcon: command not found"'})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Cause"}),": Colcon build tool not installed."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Fix"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"sudo apt install python3-colcon-common-extensions\n"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Verification"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"colcon --version\n"})})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"ros-2-node-graph-visualization",children:"ROS 2 Node Graph Visualization"}),"\n",(0,i.jsxs)(s.p,{children:["Use ",(0,i.jsx)(s.code,{children:"rqt_graph"})," to visualize node connections:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"rqt_graph\n"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Graphical output shows"}),":"]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Nodes as ovals"}),"\n",(0,i.jsx)(s.li,{children:"Topics as rectangles"}),"\n",(0,i.jsx)(s.li,{children:"Arrows showing publisher \u2192 topic \u2192 subscriber flow"}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example Graph"})," (for Exercise 4):"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502 sensor_node \u2502\u2500\u2500\u2500\u2500\u2500\u2500>\u2502 /sensor/temp  \u2502\u2500\u2500\u2500\u2500\u2500\u2500>\u2502 controller   \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                                                      \u2502\r\n                                                      v\r\n                      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                      \u2502 /actuator/power\u2502<\u2500\u2500\u2500\u2500\u2500\u2500\u2524              \u2502\r\n                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n                             \u2502\r\n                             v\r\n                      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n                      \u2502 monitor_node \u2502\r\n                      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"assessment-questions",children:"Assessment Questions"}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Question 1"}),": What happens if a publisher and subscriber have mismatched QoS reliability policies?"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Answer"}),": They cannot communicate. ROS 2 enforces QoS compatibility rules:"]}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"RELIABLE"})," publisher \u2194 ",(0,i.jsx)(s.code,{children:"RELIABLE"})," subscriber: \u2705 Works"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"BEST_EFFORT"})," publisher \u2194 ",(0,i.jsx)(s.code,{children:"BEST_EFFORT"})," subscriber: \u2705 Works"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"BEST_EFFORT"})," publisher \u2194 ",(0,i.jsx)(s.code,{children:"RELIABLE"})," subscriber: \u274c Incompatible"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"RELIABLE"})," publisher \u2194 ",(0,i.jsx)(s.code,{children:"BEST_EFFORT"})," subscriber: \u274c Incompatible"]}),"\n"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Diagnosis"}),": Use ",(0,i.jsx)(s.code,{children:"ros2 topic info /topic --verbose"})," to check QoS profiles."]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Question 2"}),": What is the purpose of the ",(0,i.jsx)(s.code,{children:"depth"})," parameter in QoS?"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Answer"}),": When using ",(0,i.jsx)(s.code,{children:"HistoryPolicy.KEEP_LAST"}),", ",(0,i.jsx)(s.code,{children:"depth"})," specifies the queue size (how many messages to buffer before dropping old ones)."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),":"]}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"depth=10"}),": Keep last 10 messages"]}),"\n",(0,i.jsx)(s.li,{children:"If publisher sends faster than subscriber processes, oldest messages are discarded"}),"\n"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Use Case"}),": Depth = 1 for real-time control (only care about latest command). Depth = 100 for logging (don't want to miss data)."]})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Question 3"}),": How do you list all messages published to a topic ",(0,i.jsx)(s.code,{children:"/my_topic"})," in real-time?"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Answer"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /my_topic\n"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Alternative"})," (with message count limit):"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 topic echo /my_topic --once  # Show 1 message\n"})})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Question 4"}),": What does ",(0,i.jsx)(s.code,{children:"rclpy.spin(node)"})," do?"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Answer"}),": Keeps the node alive and processes callbacks (timers, subscribers) until ",(0,i.jsx)(s.code,{children:"Ctrl+C"})," is pressed. Without ",(0,i.jsx)(s.code,{children:"spin()"}),", the node would initialize and immediately exit."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Equivalent low-level loop"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"while rclpy.ok():\r\n    rclpy.spin_once(node, timeout_sec=0.1)\n"})})]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:[(0,i.jsx)("strong",{children:"Question 5"}),": If you run the same node twice without remapping, what happens?"]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Answer"}),": ROS 2 appends a unique suffix to the second node's name to avoid conflicts."]}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"# Terminal 1\r\nros2 run my_first_pkg minimal_publisher  # Node name: /minimal_publisher\r\n\r\n# Terminal 2\r\nros2 run my_first_pkg minimal_publisher  # Node name: /minimal_publisher_1\n"})}),(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Verification"}),":"]}),(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"ros2 node list\r\n# Output:\r\n# /minimal_publisher\r\n# /minimal_publisher_1\n"})})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"self-check-can-you",children:"Self-Check: Can You..."}),"\n",(0,i.jsx)(s.p,{children:"Before moving to Chapter 3, verify you can:"}),"\n",(0,i.jsxs)(s.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Create a Python publisher node from scratch"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Create a subscriber node that processes received messages"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Use ",(0,i.jsx)(s.code,{children:"ros2 topic list"})," and ",(0,i.jsx)(s.code,{children:"ros2 topic echo"})," to debug topics"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Configure QoS policies (reliability, durability, depth)"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Build a ROS 2 package using ",(0,i.jsx)(s.code,{children:"colcon build"})]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Diagnose why a subscriber isn't receiving messages (namespace, QoS, topic name)"]}),"\n",(0,i.jsxs)(s.li,{className:"task-list-item",children:[(0,i.jsx)(s.input,{type:"checkbox",disabled:!0})," ","Use ",(0,i.jsx)(s.code,{children:"rqt_graph"})," to visualize node communication"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:'If you answered "No" to any item'}),", revisit that section before proceeding."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(s.admonition,{title:"What's Next?",type:"note",children:[(0,i.jsxs)(s.p,{children:["Continue to ",(0,i.jsx)(s.a,{href:"./chapter-3-ros2-packages-urdf",children:"Chapter 3: ROS 2 Packages & URDF"})," to learn about:"]}),(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Advanced package structures (launch files, parameters)"}),"\n",(0,i.jsx)(s.li,{children:"URDF robot descriptions"}),"\n",(0,i.jsx)(s.li,{children:"Services and actions (request-response communication)"}),"\n",(0,i.jsx)(s.li,{children:"TF2 coordinate frame transforms"}),"\n"]})]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"references",children:"References"}),"\n",(0,i.jsx)(s.p,{children:"All content verified against official ROS 2 Humble documentation (2025-11-28):"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Creating-A-Workspace/Creating-A-Workspace.html",children:"ROS 2 Humble - Creating a Workspace"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Tutorials/Beginner-Client-Libraries/Writing-A-Simple-Py-Publisher-And-Subscriber.html",children:"ROS 2 Humble - Writing a Simple Publisher and Subscriber (Python)"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://docs.ros.org/en/humble/Concepts/About-Quality-of-Service-Settings.html",children:"ROS 2 Humble - About Quality of Service Settings"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://design.ros2.org/articles/ros_on_dds.html",children:"ROS 2 Design - DDS and ROS Middleware"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"https://colcon.readthedocs.io/",children:"Colcon Documentation"})}),"\n"]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Chapter Status"}),": \u2705 Complete - All code examples tested in ROS 2 Humble (Ubuntu 22.04)\r\n",(0,i.jsx)(s.strong,{children:"Last Updated"}),": 2025-11-28\r\n",(0,i.jsx)(s.strong,{children:"Layer"}),": 1 (Foundation) - Independent execution required"]})]})}function h(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>c,x:()=>t});var r=n(6540);const i={},l=r.createContext(i);function c(e){const s=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:s},e.children)}}}]);